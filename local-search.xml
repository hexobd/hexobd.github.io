<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Algorithm_knowledge</title>
    <link href="/2025/03/01/Algorithm-knowledge/"/>
    <url>/2025/03/01/Algorithm-knowledge/</url>
    
    <content type="html"><![CDATA[<h1 id="前缀和-差分"><a href="#前缀和-差分" class="headerlink" title="前缀和+差分"></a>前缀和+差分</h1><h2 id="前缀和"><a href="#前缀和" class="headerlink" title="前缀和"></a>前缀和</h2><p>什么是前缀和，简而言之可以看作数列的前n项之和。</p><h3 id="一维前缀和"><a href="#一维前缀和" class="headerlink" title="一维前缀和"></a>一维前缀和</h3><p>在一维的线性的前缀和完完全全就可以套用数列求和的$$s_{n}$$，这里我们用到的数列通项公式求和为<br>$$<br>s_{n} &#x3D; s_{n-1}+a_{n} (n&gt;1)\<br>s_{0} &#x3D; a_{0}<br>$$<br>根据这个公式我们再把模拟过程在python中用列表的形式去模拟，下面给出一个例题模板</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css">有 N 个的正整数放到数组 <span class="hljs-selector-tag">A</span> 里，现在要求一个新的数组 <span class="hljs-selector-tag">B</span>，新数组的第 <span class="hljs-selector-tag">i</span> 个数 <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[i]</span> 是原数组 <span class="hljs-selector-tag">A</span> 第 <span class="hljs-number">0</span> 到第 <span class="hljs-selector-tag">i</span> 个数的和。<br><br>输入：<br><span class="hljs-number">5</span><br><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span><br>输出：<br><span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">6</span> <span class="hljs-number">10</span> <span class="hljs-number">15</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>num  = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>sum_list = [<span class="hljs-number">0</span>]*n<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(num)):<br>    <span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span>:<br>        sum_list[<span class="hljs-number">0</span>] = num[<span class="hljs-number">0</span>]<br>    sum_list[i] = sum_list[i-<span class="hljs-number">1</span>]+num[i]<br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> sum_list:<br>    <span class="hljs-built_in">print</span>(j,end=<span class="hljs-string">&#x27; &#x27;</span>)<br></code></pre></td></tr></table></figure><p>时间复杂度为$$o(n)$$</p><p>在python的itertools库中，有一个accumulate函数刚好实现的就是这个前缀和的功能</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> itertools<br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>()) <span class="hljs-comment">#这里的n纯属是因为题目需要保留</span><br>num  = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>sum_list = itertools.accumulate(num)<br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> sum_list:<br>    <span class="hljs-built_in">print</span>(j,end=<span class="hljs-string">&#x27; &#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="二维或者多维的前缀和"><a href="#二维或者多维的前缀和" class="headerlink" title="二维或者多维的前缀和"></a>二维或者多维的前缀和</h3><p>接着我们再来看一下二维的，可以直接用容斥原理来进行计算。</p><p>考虑一个具体的例子。</p><p><img src="https://oi-wiki.org/basic/images/prefix-sum-2d.svg" alt="二位前缀和示例"></p><p>这里 $$s$$是给定矩阵 $$A$$<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="A"> 的前缀和。根据定义, $$S_{3,3}$$ 是左图中虚线方框中的子矩阵的和。这里,  $$S_{3,2}$$是蓝色子矩阵的和，<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="S_{2,3}"> $$S_{2,3}$$是红色子矩阵的和，它们重叠部分的和是 $$S_{2,2}$$<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="S_{2,2}">。由此可见，如果直接相加 $$S_{3,2}$$和 $$S_{2,3}$$<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="S_{2,3}">，会重复计算 $$S_{2,2}$$，所以应该有<br>$$<br>S_{3,3}&#x3D;A_{3,3}+S_{2,3}+S_{3,2}-S_{2,2}<br>$$</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#下面是模拟写的一个二维前缀和的代码 自己写的可能有些丑陋</span><br>n,m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>rectangle = <span class="hljs-built_in">list</span>()<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    sample = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br>    rectangle.append(sample)<br>sum_list = [[<span class="hljs-number">0</span>]*m <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        <span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> j == <span class="hljs-number">0</span>:<br>            sum_list[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = rectangle[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">elif</span> i == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> j != <span class="hljs-number">0</span>:<br>            sum_list[<span class="hljs-number">0</span>][j] = sum_list[<span class="hljs-number">0</span>][j-<span class="hljs-number">1</span>] + rectangle[<span class="hljs-number">0</span>][j]<br>        <span class="hljs-keyword">elif</span> i != <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> j == <span class="hljs-number">0</span>:<br>            sum_list[i][<span class="hljs-number">0</span>] = sum_list[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]+ rectangle[i][<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">else</span>:<br>            sum_list[i][j] = rectangle[i][j] + sum_list[i-<span class="hljs-number">1</span>][j]+sum_list[i][j-<span class="hljs-number">1</span>]-sum_list[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><h3 id="一些模拟练习题"><a href="#一些模拟练习题" class="headerlink" title="一些模拟练习题"></a>一些模拟练习题</h3><h4 id="1-前缀和-前缀和原题链接"><a href="#1-前缀和-前缀和原题链接" class="headerlink" title="1.前缀和 前缀和原题链接 "></a>1.前缀和<a href="https://www.acwing.com/problem/content/797/"> 前缀和原题链接 </a></h4><h5 id="题目简要描述"><a href="#题目简要描述" class="headerlink" title="题目简要描述"></a>题目简要描述</h5><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs excel">就是输入一个长度为<span class="hljs-built_in">n</span>的整数序列，再输入m对询问l,r，对于每个询问求出l,r之间的数的和<br>输出格式<br>共 m行，每行输出一个询问的结果。<br>数据范围<br><span class="hljs-number">1</span>≤l≤r≤<span class="hljs-built_in">n</span>,<br><span class="hljs-number">1</span>≤<span class="hljs-built_in">n</span>,m≤<span class="hljs-number">100000</span>,<br>−<span class="hljs-number">1000</span>≤数列中元素的值≤<span class="hljs-number">1000</span><br>输入样例：<br><span class="hljs-number">5</span> <span class="hljs-number">3</span><br><span class="hljs-number">2</span> <span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">6</span> <span class="hljs-number">4</span><br><span class="hljs-number">1</span> <span class="hljs-number">2</span><br><span class="hljs-number">1</span> <span class="hljs-number">3</span><br><span class="hljs-number">2</span> <span class="hljs-number">4</span><br>输出样例：<br><span class="hljs-number">3</span><br><span class="hljs-number">6</span><br><span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><p>很显然这个题目和上面例题的思路一样，先求出这一序列的前缀和再根据l,r对应的下标进行相减</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br>n,m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>l1 = [<span class="hljs-number">0</span>]+<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,sys.stdin.readline().strip().split()))<br>sum_list = [<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(l1)):<br>    sum_list[i] = l1[i] + sum_list[i-<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    l,r = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    <span class="hljs-built_in">sum</span> = sum_list[r] - sum_list[l-<span class="hljs-number">1</span>]<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>)<br><span class="hljs-built_in">print</span>(sum_list)<br></code></pre></td></tr></table></figure><h4 id="2-二维前缀和796-子矩阵的和"><a href="#2-二维前缀和796-子矩阵的和" class="headerlink" title="2.二维前缀和796. 子矩阵的和 "></a>2.二维前缀和<a href="https://www.acwing.com/problem/content/description/798/">796. 子矩阵的和 </a></h4><h5 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h5><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs tap">输入一个n行m列的矩阵输入q个询问，每个询问里包含有x1,y1,x2,y2四个整数分别表示左上坐标和右下坐标<br>数据范围<br>1≤n,m≤1000,<br>1≤q≤200000,<br>1≤x1≤x2≤n,<br>1≤y1≤y2≤m,<br>−1000≤矩阵内元素的值≤1000<br>输入<br>3<span class="hljs-number"> 4 </span>3<br>1<span class="hljs-number"> 7 </span>2 4<br>3<span class="hljs-number"> 6 </span>2 8<br>2<span class="hljs-number"> 1 </span>2 3<br>1<span class="hljs-number"> 1 </span>2 2<br>2<span class="hljs-number"> 1 </span>3 4<br>1<span class="hljs-number"> 3 </span>3 4<br>输出样例：<br>17<br>27<br>21<br></code></pre></td></tr></table></figure><p>这个题目首先从给的范围来看数不算大，最后的最简的时间复杂度应该是$$o(mn)$$到$$o(q)$$之间</p><p>因为让求子矩阵的和，这里就可以利用上面的二维前缀和的思路先把矩阵的和，进行一个容斥原理的求解。但是根据x1,y1,x2,y2的范围来看，我们上面的给的模板代码可以再美化一下也就是初始化的时候外面都填一圈0即可。然后就是关于最后的子矩阵的所有数之和：这里我们可以通过划分为四块正方形然后通过容斥原理的逆推就可以得到正确的结果。</p><table><thead><tr><th align="center">(x1-1,y1-1)</th><th align="center"></th><th align="center">(x2,y1-1)</th></tr></thead><tbody><tr><td align="center"></td><td align="center"><em>(x1,y1)</em></td><td align="center"></td></tr><tr><td align="center">(x1-1,y2)</td><td align="center"></td><td align="center"><em>(x2,y2)</em></td></tr></tbody></table><p>根据如图所示(<del>实在画不出图来了</del>),为了便于表示前缀和这里直接用坐标进行表示:</p><p>sum &#x3D; (x2,y2)-(x2,y1-1)-(x1-1,y2)+(x1-1,y1-1)</p><p>下面附上代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br>n,m,q = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,sys.stdin.readline().strip().split())<br>matrix = [[<span class="hljs-number">0</span>]*(m+<span class="hljs-number">1</span>)]+<span class="hljs-built_in">list</span>([<span class="hljs-number">0</span>]+<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,sys.stdin.readline().strip().split())) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n))<br>sum_list = <span class="hljs-built_in">list</span>([<span class="hljs-number">0</span>]*(m+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>))<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>        sum_list[i][j] = matrix[i][j] + sum_list[i][j-<span class="hljs-number">1</span>] + sum_list[i-<span class="hljs-number">1</span>][j] - sum_list[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>    x1,y1,x2,y2 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,sys.stdin.readline().strip().split())<br>    ans = sum_list[x2][y2] - sum_list[x1-<span class="hljs-number">1</span>][y2] - sum_list[x2][y1-<span class="hljs-number">1</span>] + sum_list[x1-<span class="hljs-number">1</span>][y1-<span class="hljs-number">1</span>]<br>    <span class="hljs-built_in">print</span>(ans)<br><br></code></pre></td></tr></table></figure><h2 id="差分"><a href="#差分" class="headerlink" title="差分"></a>差分</h2><p>简而言之可以理解为求知道和求通项，也可以理解为前缀和的逆<br>$$<br>b_{i} &#x3D;\begin{cases}<br> a_{i}-a_{i-1}   (i\in  \left [ 2,n \right ] )<br> \<br>a_{1}  \space\space\space i&#x3D;1<br>\end{cases}<br>$$<br>这里$$a_{i}$$是$$b_{i}$$的前缀和。然后计算$$a_{i}$$的前缀和还可以用$$ \sum_{i&#x3D;1}^{n} (n-i+1) b_{i}$$</p><p>下面先来看到例题</p><h3 id="U69096-前缀和的逆"><a href="#U69096-前缀和的逆" class="headerlink" title="U69096 前缀和的逆"></a><a href="https://www.luogu.com.cn/problem/U69096">U69096 前缀和的逆</a></h3><h4 id="题目简述"><a href="#题目简述" class="headerlink" title="题目简述"></a>题目简述</h4><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tap">简单来说就是给一两个输入n,m。其中n代表输入的个数，m代表输入的前缀和，要还原出每一项的数<br>输入<br>6<br>2<span class="hljs-number"> 10 </span>20<span class="hljs-number"> 25 </span>30 43<br>输出<br>2<span class="hljs-number"> 8 </span>10<span class="hljs-number"> 5 </span>5 13<br></code></pre></td></tr></table></figure><p>这道题就是套公式比较简单直接放源码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>prefix = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,sys.stdin.readline().strip().split()))<br>origin = [prefix[<span class="hljs-number">0</span>]]+[<span class="hljs-number">0</span>]*(n-<span class="hljs-number">1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>    origin[i] = prefix[i] - prefix[i-<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> origin:<br>    <span class="hljs-built_in">print</span>(j,end=<span class="hljs-string">&#x27; &#x27;</span>)<br><br></code></pre></td></tr></table></figure><p>这里python的原因然后跑的时候第二个用例内存超了，换成c++可以跑通</p><h3 id="797-差分"><a href="#797-差分" class="headerlink" title="797. 差分 "></a><a href="https://www.acwing.com/problem/content/799/">797. 差分 </a></h3><h3 id="一维差分"><a href="#一维差分" class="headerlink" title="一维差分"></a>一维差分</h3><p>同减一个常数c，这个操作是首先构造一个差分数组，然后再在新构造的差分数组中$$l$$的位置$$+$$或$$-$$个c，再$$r+1$$的位置$$+$$或$$-$$个c。</p><h4 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h4><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tap">输入一个长度为 n的整数序列。接下来输入 m个操作，每个操作包含三个整数 l,r,c，表示将序列中 [l,r]之间的每个数加上 c。<br><br>数据范围<br>1≤n,m≤100000,<br>1≤l≤r≤n,<br>−1000≤c≤1000,<br>−1000≤整数序列中元素的值≤1000<br>输入样例：<br>6 3<br>1<span class="hljs-number"> 2 </span>2<span class="hljs-number"> 1 </span>2 1<br>1<span class="hljs-number"> 3 </span>1<br>3<span class="hljs-number"> 5 </span>1<br>1<span class="hljs-number"> 6 </span>1<br>输出样例：<br>3<span class="hljs-number"> 4 </span>5<span class="hljs-number"> 3 </span>4 2<br></code></pre></td></tr></table></figure><p>很显然是一道模板题只要我们按照上述的思路进行一个模拟即可完成</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">n,m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,(<span class="hljs-built_in">input</span>().strip().split()))<br>array = (<span class="hljs-number">0</span>,)+<span class="hljs-built_in">tuple</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().strip().split()))+(<span class="hljs-number">0</span>,)  <br>div = [<span class="hljs-number">0</span>]*(n+<span class="hljs-number">2</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    div[i] = array[i]-array[i-<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    l,r,c = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,(<span class="hljs-built_in">input</span>().strip().split()))<br>    div[l] = div[l]+c<br>    div[r+<span class="hljs-number">1</span>] = div[r+<span class="hljs-number">1</span>]-c<br><br>ans = [<span class="hljs-number">0</span>]*(n+<span class="hljs-number">2</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    ans[i] = ans[i-<span class="hljs-number">1</span>] + div[i]<br><span class="hljs-built_in">print</span>(*ans[<span class="hljs-number">1</span>:-<span class="hljs-number">1</span>]) <br></code></pre></td></tr></table></figure><p>有一点需要注意的是*在python中是解包运算符，对容器类型<strong>list,tuple,dict,set</strong>解包，接单来说就是把里面的元素给显示出来</p><p>**对于字典解包的用法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 案例一 解包的元素作为参数传给定义的函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">myfun</span>(<span class="hljs-params">name,age</span>):<br><span class="hljs-built_in">print</span>(name,age)<br>myfun(**dict1)<br>Mogu134 <span class="hljs-number">19</span><br><br><span class="hljs-comment"># 案例二 解包两个字典合为一个字典</span><br>dict2 = &#123;<span class="hljs-string">&#x27;nationality&#x27;</span>:<span class="hljs-string">&#x27;China&#x27;</span>,<span class="hljs-string">&#x27;hobby&#x27;</span>:<span class="hljs-string">&#x27;eating&#x27;</span>&#125;<br><span class="hljs-built_in">print</span>(&#123;**dict1,**dict2&#125;)<br>&#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;Mogu134&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>: <span class="hljs-number">19</span>, <span class="hljs-string">&#x27;nationality&#x27;</span>: <span class="hljs-string">&#x27;China&#x27;</span>, <span class="hljs-string">&#x27;hobby&#x27;</span>: <span class="hljs-string">&#x27;eating&#x27;</span>&#125;<br><br></code></pre></td></tr></table></figure><p>**args是用来收集任意数量的实参，并存入到args元组中</p><p>**kwargs是用来收集任意数量的关键字实参，存到kwargs字典中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">**kwargs</span>):<br><span class="hljs-built_in">print</span>(kwargs)<br>test(time=<span class="hljs-string">&#x27;晚上&#x27;</span>,place=<span class="hljs-string">&#x27;操场&#x27;</span>,activity=<span class="hljs-string">&#x27;团建&#x27;</span>)<br>&#123;<span class="hljs-string">&#x27;time&#x27;</span>: <span class="hljs-string">&#x27;晚上&#x27;</span>, <span class="hljs-string">&#x27;place&#x27;</span>: <span class="hljs-string">&#x27;操场&#x27;</span>, <span class="hljs-string">&#x27;activity&#x27;</span>: <span class="hljs-string">&#x27;团建&#x27;</span>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="差分矩阵"><a href="#差分矩阵" class="headerlink" title="差分矩阵"></a>差分矩阵</h3><h4 id="二维差分"><a href="#二维差分" class="headerlink" title="二维差分"></a>二维差分</h4><p>二维差分数组的公式可以由二维前缀和的公式倒推，</p><p>$$a[i][j] &#x3D; b[i][j]-b[i-1][j]-b[i][j-1]+b[i-1][j-1]$$   </p><p>其中$$b[i][j]$$是$$a[i][j]$$的前缀和数组，可以简化记忆右对角线两顶点减左对角线两顶点(自己根据坐标公式总结的便于记忆)。 </p><p>那么如何让二维差分数组指定区域内的数据同时加或减c</p><p>这里可以简单理解为$$a[x1][y1]+&#x3D;c,a[x2+1][y2+1]+&#x3D;c$$$$a[x1][y2+1]-&#x3D;c,a[x2+1][y1]-&#x3D;c$$</p><p>也就是简而言之就是左上角和右下角加c,左下角和右上角减c。具体的推导可以看[这一篇博客](<a href="https://blog.csdn.net/m0_74215326/article/details/129620912">【学习总结】一、二维前缀和 &amp;&amp; 一、二维差分-CSDN博客</a>)</p><p>内容比较详细</p><p>下面来看到题目练练手</p><h5 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h5><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs tap">输入一个 n行m列的整数矩阵，再输入 q个操作，每个操作包含五个整数 x1,y1,x2,y2,c，其中(x1,y1)<br>和(x2,y2)表示一个子矩阵的左上角坐标和右下角坐标。每个操作都要将选中的子矩阵中的每个元素的值加上 c。<br>数据范围<br>1≤n,m≤1000,<br>1≤q≤100000,<br>1≤x1≤x2≤n,<br>1≤y1≤y2≤m,<br>−1000≤c≤1000,<br>−1000≤矩阵内元素的值≤1000<br>输入样例：<br>3<span class="hljs-number"> 4 </span>3<br>1<span class="hljs-number"> 2 </span>2 1<br>3<span class="hljs-number"> 2 </span>2 1<br>1<span class="hljs-number"> 1 </span>1 1<br>1<span class="hljs-number"> 1 </span>2<span class="hljs-number"> 2 </span>1<br>1<span class="hljs-number"> 3 </span>2<span class="hljs-number"> 3 </span>2<br>3<span class="hljs-number"> 1 </span>3<span class="hljs-number"> 4 </span>1<br>输出样例：<br>2<span class="hljs-number"> 3 </span>4 1<br>4<span class="hljs-number"> 3 </span>4 1<br>2<span class="hljs-number"> 2 </span>2 2<br></code></pre></td></tr></table></figure><p>这道题就是一个单纯的二维差分矩阵的问题，先构造差分矩阵数组，然后再进行区域内的加减，最后再进行前缀和还原</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br>n,m,q = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,sys.stdin.readline().strip().split())<br>array = <span class="hljs-built_in">list</span>([[<span class="hljs-number">0</span>]*(m+<span class="hljs-number">2</span>)])<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    array.append([<span class="hljs-number">0</span>]+<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,sys.stdin.readline().strip().split()))+[<span class="hljs-number">0</span>])<br>div =[[<span class="hljs-number">0</span>]*(m+<span class="hljs-number">2</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">2</span>)]  <br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>        div[i][j] = array[i][j] - array[i-<span class="hljs-number">1</span>][j]-array[i][j-<span class="hljs-number">1</span>] + array[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>    x1,y1,x2,y2,c = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,sys.stdin.readline().strip().split())<br>    div[x1][y1] += c<br>    div[x2+<span class="hljs-number">1</span>][y2+<span class="hljs-number">1</span>] += c<br>    div[x1][y2+<span class="hljs-number">1</span>] -= c<br>    div[x2+<span class="hljs-number">1</span>][y1] -=c<br>ans = [[<span class="hljs-number">0</span>]*(m+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m+<span class="hljs-number">1</span>):<br>        ans[k][v] = div[k][v]+ans[k-<span class="hljs-number">1</span>][v]+ans[k][v-<span class="hljs-number">1</span>]-ans[k-<span class="hljs-number">1</span>][v-<span class="hljs-number">1</span>]<br>res = ans[<span class="hljs-number">1</span>:]<br><span class="hljs-keyword">for</span> var <span class="hljs-keyword">in</span> res:<br>    <span class="hljs-built_in">print</span>(*var[<span class="hljs-number">1</span>:])<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Algorithm</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前缀和+差分</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Algorithm_practice1</title>
    <link href="/2025/02/19/Algorithm/"/>
    <url>/2025/02/19/Algorithm/</url>
    
    <content type="html"><![CDATA[<h2 id="practice-1"><a href="#practice-1" class="headerlink" title="practice 1"></a>practice 1</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs text"><br>大洋国有两种面值的纸币，面值分别是 m 和 n,m n 互质,现在问你如果有无限多张 m 和 n，最大的不能组成的金额是多少<br>例如说 m n 分别是 4 和 7 时，最大不能组成的金额是 17<br>18=1*4+2*7<br>19=3*4+1*7<br>20=5*4+0*7<br>21=0*4+3*7<br>...<br></code></pre></td></tr></table></figure><p>这个题目翻译过来就可以理解为</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">mx+<span class="hljs-attribute">ny</span>=k，给出 m n，求方程不存在非负整数解时 k 的最大值<br></code></pre></td></tr></table></figure><p>现在乍一看有点像exgcd,因为exgcd是 mx+ny&#x3D;gcd(m,n)一定存在一组解x,y。但是显然和个题目有点不符合。看题目未果直接上一串测试代码进行测试看能否从结果中得到规律</p><p>下面是测试代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">k_max</span>(<span class="hljs-params">m,n</span>):<br>    a_list = <span class="hljs-built_in">list</span>()<br>    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>        <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>            k = m*x+n*y<br>            a_list.append(k)<br>    ans = <span class="hljs-built_in">sorted</span>(a_list)<br>    <span class="hljs-built_in">print</span>(ans)<br>    ans = ans [:-<span class="hljs-number">40</span>]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(ans)-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> ans[i]-<span class="hljs-number">1</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> ans:<br>            <span class="hljs-keyword">return</span> ans[i]-<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>能够得到一下的结果数据</p><table><thead><tr><th align="center">m</th><th align="center">n</th><th align="center">value</th><th align="center">k</th><th align="center">m*i</th><th align="center">n*j</th></tr></thead><tbody><tr><td align="center">2</td><td align="center">3</td><td align="center">2</td><td align="center">1</td><td align="center">2*1</td><td align="center">3*0</td></tr><tr><td align="center">2</td><td align="center">5</td><td align="center">4</td><td align="center">3</td><td align="center">2*2</td><td align="center">5*0</td></tr><tr><td align="center">3</td><td align="center">5</td><td align="center">8</td><td align="center">7</td><td align="center">3*1</td><td align="center">5*1</td></tr><tr><td align="center">4</td><td align="center">7</td><td align="center">18</td><td align="center">17</td><td align="center">4*1</td><td align="center">7*2</td></tr><tr><td align="center">5</td><td align="center">7</td><td align="center">24</td><td align="center">23</td><td align="center">5*2</td><td align="center">7*2</td></tr><tr><td align="center">5</td><td align="center">9</td><td align="center">32</td><td align="center">31</td><td align="center">5*1</td><td align="center">9*3</td></tr></tbody></table><p>上面表格中的value值就是k+1,即最大不能组成金额后的最小值。这里因为题目可知，达到最大不能组成金额后，任意的金额都可以有mx+ny来表示。</p><p>看表格中的数据如果只看m×i 和 n×j 看不出来什么，但是如果看m,n,k这三个数值，<del>如果你有绝世的数感</del>,你会发现这三个数满足这个规律k &#x3D; mn -m-n。唔这个真的好像RSA中的phi值的计算虽然但是不知道有无关系。然后经过查阅资料确实在数论中存在这个公式并通过证明(贝祖定理，就当积累一下这个公式)</p><p>问了一下deepseek下面是推到过程，根据方程 k&#x3D;mn−m−n<em>k</em>&#x3D;<em>mn</em>−<em>m</em>−<em>n</em>，我们可以通过以下步骤进行证明和分析：</p><hr><h3 id="关键变形与解的构造"><a href="#关键变形与解的构造" class="headerlink" title="关键变形与解的构造"></a><strong>关键变形与解的构造</strong></h3><ol><li><p><strong>方程变形</strong><br>原方程两边加1：</p><p>k+1&#x3D;mn−m−n+1&#x3D;(m−1)(n−1)<em>k</em>+1&#x3D;<em>mn</em>−<em>m</em>−<em>n</em>+1&#x3D;(<em>m</em>−1)(<em>n</em>−1)</p><p>这表明 <strong>k+1*k*+1 必须能分解为两个整数 (m−1)(*m*−1) 和 (n−1)(*n*−1) 的乘积</strong><a href="https://www.zybang.com/question/1de090e13c9135105a2ec679e4ea06db.html">9</a><a href="http://www.doc88.com/p-698220310809.html">13</a>。</p></li><li><p><strong>解的表示</strong><br>若 k+1&#x3D;p⋅q<em>k</em>+1&#x3D;<em>p</em>⋅<em>q</em>（其中 p,q<em>p</em>,<em>q</em> 为整数），则解为：</p><p>m&#x3D;p+1,n&#x3D;q+1<em>m</em>&#x3D;<em>p</em>+1,<em>n</em>&#x3D;<em>q</em>+1</p><p>例如：</p><ul><li>当 k&#x3D;5<em>k</em>&#x3D;5 时，k+1&#x3D;6&#x3D;2×3<em>k</em>+1&#x3D;6&#x3D;2×3，则 m&#x3D;3,n&#x3D;4<em>m</em>&#x3D;3,<em>n</em>&#x3D;4 或 m&#x3D;4,n&#x3D;3<em>m</em>&#x3D;4,<em>n</em>&#x3D;3。</li></ul></li></ol><hr><h3 id="解的讨论"><a href="#解的讨论" class="headerlink" title="解的讨论"></a><strong>解的讨论</strong></h3><ol><li>整数解的存在性<ul><li>当 k+1<em>k</em>+1 为 <strong>合数</strong> 时，方程有多个整数解（对应不同的因数分解方式）。</li><li>当 k+1<em>k</em>+1 为 <strong>质数</strong> 时，方程仅有有限解（如 m&#x3D;2,n&#x3D;k+2<em>m</em>&#x3D;2,<em>n</em>&#x3D;<em>k</em>+2 或 m&#x3D;k+2,n&#x3D;2<em>m</em>&#x3D;<em>k</em>+2,<em>n</em>&#x3D;2）。</li><li>当 k+1<em>k</em>+1 为 <strong>负数</strong> 时，解可能涉及负整数。例如，若 k&#x3D;−3<em>k</em>&#x3D;−3，则 k+1&#x3D;−2&#x3D;(−1)×2<em>k</em>+1&#x3D;−2&#x3D;(−1)×2，解得 m&#x3D;0,n&#x3D;3<em>m</em>&#x3D;0,<em>n</em>&#x3D;3 或 m&#x3D;3,n&#x3D;0<em>m</em>&#x3D;3,<em>n</em>&#x3D;0。</li></ul></li><li><strong>解的对称性</strong><br>方程具有对称性：若 (m,n)(<em>m</em>,<em>n</em>) 是解，则 (n,m)(<em>n</em>,<em>m</em>) 也是解。例如，(3,4)(3,4) 和 (4,3)(4,3) 均为 k&#x3D;5<em>k</em>&#x3D;5 的解。</li></ol><hr><h3 id="与数论定理的联系"><a href="#与数论定理的联系" class="headerlink" title="与数论定理的联系"></a><strong>与数论定理的联系</strong></h3><ol><li><p><strong>贝祖定理（Bézout’s Identity）的类比</strong><br>原方程 mn−m−n&#x3D;k<em>mn</em>−<em>m</em>−<em>n</em>&#x3D;<em>k</em> 可改写为：</p><p>m(n−1)−n&#x3D;k<em>m</em>(<em>n</em>−1)−<em>n</em>&#x3D;<em>k</em></p><p>这表明 m<em>m</em> 和 n<em>n</em> 需满足特定线性组合关系。若 k<em>k</em> 是 gcd⁡(m,n)gcd(<em>m</em>,<em>n</em>) 的倍数，则方程有解<a href="http://www.doc88.com/p-698220310809.html">13</a>。</p></li><li><p><strong>最大公约数的应用</strong><br>设 d&#x3D;gcd⁡(m,n)<em>d</em>&#x3D;gcd(<em>m</em>,<em>n</em>)，则方程可表示为：</p><p>d(md⋅nd−md−nd)&#x3D;k<em>d</em>(<em>d**m</em>⋅<em>d**n</em>−<em>d**m</em>−<em>d**n</em>)&#x3D;<em>k</em></p><p>当 d<em>d</em> 能整除 k<em>k</em> 时，方程可能存在整数解。</p></li></ol><p>所最后的exp代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">k_max</span>(<span class="hljs-params">m,n</span>):<br>    <span class="hljs-keyword">return</span> m*n-m-n<br></code></pre></td></tr></table></figure><p>这里还有jack_gdn师傅的一个思路</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">首先来说，28 是一个肯定能拼出来的数，而且有（至少）两种拼法，7<span class="hljs-number">*4</span>+0<span class="hljs-number">*7</span> 或者 0<span class="hljs-number">*4</span>+4<span class="hljs-number">*7</span>。那么如果我想在这个数字上加1或者减1怎么弄？观察发现2<span class="hljs-number">*4</span>-1<span class="hljs-number">*7</span>=1，3<span class="hljs-number">*7</span>-5<span class="hljs-number">*4</span>=1，也就是说如果我想让这个数字减去1，就可以放进去一个7拿走两个4，或者放进去五个4拿走三个7。这几个系数都可以在 O(m) 和 O(n) 的时间内遍历出来，所以对于一个数，如果这个数既不能拿走两个4，也不能拿走三个7，那么比它小的数中肯定有不能用 4 和 7 组成的数字。那么既不能拿走两个4，又不能拿走三个7，而且这个数尽可能大，那么应该是多少呢？那就是刚好有一个4和两个7，也就是18，那么比 18 小 1 的 17 就刚好是最大的不能用 4 和 7 组合的数。推广一下就是，刚好不能用 m 和 n 组成的最大数 k 可以表示为 (x-1)n+(y-1)m-1，其中 x, y 分别为方程<br>ay-xn-1, <span class="hljs-attribute">bx-my</span>=1 的最小非负整数解<br><br></code></pre></td></tr></table></figure><h2 id="6135-奶牛体检-原题链接"><a href="#6135-奶牛体检-原题链接" class="headerlink" title="6135. 奶牛体检 | 原题链接"></a>6135. 奶牛体检 | <a href="https://www.acwing.com/problem/content/description/6138/">原题链接</a></h2><h3 id="题目简要描述"><a href="#题目简要描述" class="headerlink" title="题目简要描述"></a>题目简要描述</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs tap">输入有3行，第一行是一个整数 n，第二行和第三个各自有 n 个用空格分割的整数，第二行表示原序列，第三行表示目标序列。现在可以执行一次操作，就是在原序列中选出 l 和 r 两个位置，然后将这个区间内的元素倒过来，这时候得到一个新序列，新序列和目标序列中可能会有对应位置的元素相等。(l,r) 被称为使新序列与目标序列中有 n 个元素对应位置相等的方法，现在需要你输出 n+1 行，第 i 行表示使新序列与目标序列中有 i-1个元素对应位置相等的方法数量。l 和 r 可以相等，<br>输入样例1<br>3<br>1<span class="hljs-number"> 3 </span>2<br>3<span class="hljs-number"> 2 </span>1<br>输出样例1：<br>3<br>3<br>0<br>0<br>当 (l,r) 为 (1,1) (2,2) (3,3) 时，新序列中不会与目标序列对应位置元素相等，(1,2) (2,3) (1,3) 均可以有一个对应位置元素相等，没有方法能够使新序列与目标序列中有<span class="hljs-number"> 2 </span>个或<span class="hljs-number"> 3 </span>个对应位置元素相等。<br><br>输入样例2：<br>3<br>1<span class="hljs-number"> 2 </span>3<br>1<span class="hljs-number"> 2 </span>3<br>输出样例2：<br>0<br>3<br>0<br>3<br><br>输入样例3：<br>7<br>1<span class="hljs-number"> 3 </span>2<span class="hljs-number"> 2 </span>1<span class="hljs-number"> 3 </span>2<br>3<span class="hljs-number"> 2 </span>2<span class="hljs-number"> 1 </span>2<span class="hljs-number"> 3 </span>1<br>输出样例3：<br>0<br>6<br>14<br>6<br>2<br>0<br>0<br>0<br><br>1&lt;=l&lt;=r&lt;=n<br>数据范围1≤N≤7500<br></code></pre></td></tr></table></figure><p>再把描述优化一下就是说要写出第i行，i-1个元素，两个序列a[i]&#x3D;&#x3D;b[i] 的方法的个数。</p><h3 id="解题过程"><a href="#解题过程" class="headerlink" title="解题过程"></a>解题过程</h3><p>很容易想到进行枚举，我最开始是这样的想，先把输入的数据转换成[0]+list的形式，按照正常的顺序从左向右以此遍历l,r然后进行顺序的转换，最后把得到的顺序转换到一个新的空列表里，最后再用lambda函数对应列元素相减看元素0的个数，但是因为你存到空列表这个过程中，实际上已经存了个 $$o(n^2)$$的时间复杂度的程序，然后lambda函数又是一个$$o(n)$$的时间复杂度的程序，最后下来是个$$o(n^3)$$的一个程序。因为这个数据范围的因素，$$o(n^3)$$程序应该很容易不通过，因此要想着如何进行优化这个算法。但是冥思苦想没有思路，不知道从哪里下手，中间Jack_GDN师傅给了个提示就是<strong>降低时间复杂度的关键是减少重复和不必要操作的次数</strong> 这是个比较重要的点。我们只需针对重复的步骤进行删减冗余就可以优化代码。在整个过程中会发现<strong>l&#x3D;2,r&#x3D;3</strong>时(2,3)的位置交换一次顺序，当<strong>l&#x3D;1,r&#x3D;4</strong>时(2,3)又重复操作交换了一次顺序，当<strong>l&#x3D;1,r&#x3D;5</strong>时也是同理(这里需要体会一下重复的含义)。</p><p>这样的话我们遍历的时候就可以不用从头到尾遍历，而是根据中间向两边扩展的一种思路去写就可以避免重复操作的问题。当然这里需要考虑奇数和偶数分开讨论。</p><p>对于如何计数，我们可以先考虑一个问题，就是题目是要找新序列和目标序列中a[i]&#x3D;b[i]的不同个数的方法数，那么就不妨直接在原序列上进行一个修改。先统计出原序列的 a[i]&#x3D;b[i] 的个数，然后再通过从中间向两边不断扩散得到的序列进行一个叠加(这里是学习了一下wp的思路)</p><p>其中：a[l]&#x3D;b[l] ，a[r]&#x3D;b[r]为减一，a[l]&#x3D;b[r],a[r]&#x3D;b[l]为加一。于是就有下面的代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>origin = [<span class="hljs-number">0</span>]+<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())) <br>target = [<span class="hljs-number">0</span>]+<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split()))<br><br>ans = defaultdict(<span class="hljs-built_in">int</span>) <span class="hljs-comment">#这个是默认字典，里面带int类型是便于计数，默认ans[i]=0</span><br><br>count = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> origin[i] == target[i]:<br>        count +=<span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-comment">#奇数的情况</span><br>    l,r = i,i  <span class="hljs-comment">#从中间的同一个点向两侧</span><br>    sum_odd = count<br>    <span class="hljs-keyword">while</span> l &gt;=<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> r &lt;= n:<br>        sum_odd +=  (origin[l]==target[r])+(origin[r]==target[l])-(origin[l]==target[l])-(origin[r]==target[r])<br>        ans[sum_odd] += <span class="hljs-number">1</span> <span class="hljs-comment">#记录同一种的情况的方法数</span><br>        r += <span class="hljs-number">1</span><br>        l -= <span class="hljs-number">1</span><br>    <br>    <span class="hljs-comment">#偶数的情况</span><br>    l,r = i-<span class="hljs-number">1</span>,i <br>    sum_even = count<br>    <span class="hljs-keyword">while</span> l &gt;=<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> r &lt;= n:<br>        sum_even +=  (origin[l]==target[r])+(origin[r]==target[l])-(origin[l]==target[l])-(origin[r]==target[r])<br>        ans[sum_even] += <span class="hljs-number">1</span> <span class="hljs-comment">#记录同一种的情况的方法数</span><br>        r+=<span class="hljs-number">1</span><br>        l -=<span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>):<br>    <span class="hljs-built_in">print</span>(ans[i])<br></code></pre></td></tr></table></figure><h2 id="最大正方形原题链接"><a href="#最大正方形原题链接" class="headerlink" title="最大正方形原题链接"></a>最大正方形<a href="https://www.luogu.com.cn/problem/P1387">原题链接</a></h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述:"></a>题目描述:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">在一个 n×m 的只包含 <span class="hljs-number">0</span> 和 <span class="hljs-number">1</span> 的矩阵里找出一个不包含 <span class="hljs-number">0</span> 的最大正方形，输出边长。<br>输入<br><span class="hljs-number">4</span> <span class="hljs-number">4</span>  <span class="hljs-comment">#n和m</span><br><span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span><br><span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span><br><span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span><br><span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br>输出： <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>这个题目最开始是想着练习二维前缀和的，但是出乎意料的不太行。因为最开始根据这个二维矩阵能把每个对应位置的值给算出来，然后根据这个值本来想着是通过判断是否为平方数进行一个计数，显然这里会忽略掉不是正方形但是前缀和也是平方数的情况，这样的话就会误算。因此单纯从前缀和去判断最大正方形的边长是走不通的。<del>(这里还傻傻的思考了好久如何解决，试了好几种方法，比如说拿i,j的最大值当成可能存在的最大边然后进行倒着遍历求边长，当然最后还是出现了上面的问题。)</del></p><p>最后实在没辙，看了一眼wp,竟然是用了动态规划,Orz!  不太会，只好先硬着头皮把这道题所涉及的动态规划的思路理一下。</p><h3 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h3><p>通过确定一个极大的正方形，向上，向左，左上进行一个逐步寻找其解的合理性的结果。具体的一个推到过程就直接粘了wp中的过程了</p><p><img src="https://img.dexbug.com/i/2025/02/26/sbxhwy.png" alt="image"></p><p>这里需要注意下，就是这里的状态方程直接套用数字逻辑中触发器比较好理解，就是找次态和现态之间的关系。<br>$$<br>次态 &#x3D; x的最小值+所处极大值点的值<br>$$</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys <br>n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().strip().split())  <br>rectangle = [<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().strip().split())) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>target = [rectangle[<span class="hljs-number">0</span>]] + [[i[<span class="hljs-number">0</span>]] + [<span class="hljs-number">0</span>] * (m - <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> rectangle[<span class="hljs-number">1</span>:]]<br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m):<br>        <span class="hljs-keyword">if</span> rectangle[i][j]:<br>            target[i][j] = rectangle[i][j] + <span class="hljs-built_in">min</span>(target[i-<span class="hljs-number">1</span>][j],target[i][j-<span class="hljs-number">1</span>],target[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>])<br>            ans = <span class="hljs-built_in">max</span>(ans,target[i][j])<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h2 id="哞叫时间II"><a href="#哞叫时间II" class="headerlink" title="哞叫时间II"></a>哞叫时间II</h2><p>emm这个题纯属是千呼万唤始出来的感觉。</p><h3 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs excel">输入<span class="hljs-built_in">n</span>,和一个<span class="hljs-built_in">n</span>列的整数序列，要找到这个整数序列中存在abb形式的个数<br>数据范围<br><span class="hljs-number">1</span>≤<span class="hljs-built_in">N</span>≤<span class="hljs-number">10</span>^<span class="hljs-number">6</span>,<br><span class="hljs-number">1</span>≤ai≤<span class="hljs-built_in">N</span><br>输入样例：<br><span class="hljs-number">6</span><br><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">4</span> <span class="hljs-number">4</span><br>输出样例：<br><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>这个题目最简单的思路是直接三层循环遍历去找，但是根据数据范围来说$$o(n^3)$$的时间复杂度有点高，需要降到$$o(nlogn)$$或者是$$o(n)$$的形式才可以。因此需要进行优化，这就需要看操作重复的部分了。(这个感觉比较难理解)，就是从以下的样例来看</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">7</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">4</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>这里要是正着数的的话我们可能会遇到遍历过第一个2之后再遍历一遍2的情况，这步属于冗余部分，因此为了避免这个我们要考虑从后遍历找到两个一样的即可。但是这里还会出现一个情况就是我们需要考虑前面有与自身重复和其他遍历的数例如上面样例中的2这种重复两种因素。我们肯定是要减掉重复的数据。</p><p>这里可以分两步步走: 1. 就是先找不与自身重复的数的种类，这里我们可以用<strong>列表</strong>或者<strong>字典</strong>去存储截止到当前数目不同的数字的个数。这里的个数可以直接用集合的长度去表示</p><p>2.对于与自身重复的种类的情况来说，因为采用了集合去计算不同数字的个数，那么直接等价为当倒数第二个数前还有与自己重复的数，与自己重复数的最多只有一个，直接减去即可。</p><p>对于整个框架来说，我们还需要统计出每个数字的个数用来判断遍历到倒数第二个a之前,前面是否还有重复的a</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter,defaultdict<br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>m = <span class="hljs-built_in">tuple</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().strip().split()))<br>dif = <span class="hljs-built_in">set</span>()<br>var = <span class="hljs-built_in">dict</span>()<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):  <span class="hljs-comment">#计算截止到当前为止，不同的数的个数</span><br>    var[i] = <span class="hljs-built_in">len</span>(dif)<br>    dif.add(m[i])<br>cnt1 = Counter(m)   <span class="hljs-comment">#统计出每个数的个数</span><br>cnt = defaultdict(<span class="hljs-built_in">int</span>)  <span class="hljs-comment">#用来倒着统计</span><br>ans = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>): <br>    cnt[m[j]] += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> cnt[m[j]] ==<span class="hljs-number">2</span>:<br>        lenghth = var[j]<br>        <span class="hljs-keyword">if</span> cnt1[m[j]] &gt; <span class="hljs-number">2</span>:<br>            lenghth -= <span class="hljs-number">1</span>   <span class="hljs-comment">#减去重复的数</span><br>        ans += lenghth<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Algorithm</category>
      
    </categories>
    
    
    <tags>
      
      <tag>一些算法的小练习涉及如何用数学知识解算法，优化算法的思路，和一些动态规划的思想</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>模拟火车客运货运系统</title>
    <link href="/2024/06/27/%E6%A8%A1%E6%8B%9F%E7%81%AB%E8%BD%A6%E5%AE%A2%E8%BF%90%E8%B4%A7%E8%BF%90%E7%B3%BB%E7%BB%9F/"/>
    <url>/2024/06/27/%E6%A8%A1%E6%8B%9F%E7%81%AB%E8%BD%A6%E5%AE%A2%E8%BF%90%E8%B4%A7%E8%BF%90%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="模拟火车客运货运系统"><a href="#模拟火车客运货运系统" class="headerlink" title="模拟火车客运货运系统"></a>模拟火车客运货运系统</h1><h6 id="提出过程："><a href="#提出过程：" class="headerlink" title="提出过程："></a>提出过程：</h6><p>​临近期末放假回家，外地的学生都避免不了一个购票抢票的话题，再加上这一个学期的所学知识，于是便想出了要去做出一个客运货运的查票系统，便于我们了解车票，然后进行设计购票。</p><h5 id="项目的概述和功能分析"><a href="#项目的概述和功能分析" class="headerlink" title="项目的概述和功能分析"></a>项目的概述和功能分析</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">这个项目里面通过使用了Tkinter 模块设计出一个登录的GUI界面，但是后面的每一项具体的选择后的结果仍是在编译器里面进行。在这个项目中，同时还运用了Geo画出了中国地图并赋予特定城市的AQI指数，然后还通过matploitlib实现了不同城市的天气预报的最高最低气温的柱状图。同时还赋予了一个货运功能，这样便于通过里程数大致估算出寄件所需要的钱数，注意的是两城市间的距离是根据经纬度坐标算出的直线距离，这里会存在误差。<br></code></pre></td></tr></table></figure><h5 id="数据存储："><a href="#数据存储：" class="headerlink" title="数据存储："></a>数据存储：</h5><p>​这个项目直接简单的把txt文件当成一个数据库，把生成的数据用json格式写入。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> datetime<br><br>start = [<span class="hljs-string">&quot;北京&quot;</span>, <span class="hljs-string">&quot;上海&quot;</span>, <span class="hljs-string">&quot;广州&quot;</span>, <span class="hljs-string">&quot;深圳&quot;</span>, <span class="hljs-string">&quot;成都&quot;</span>, <span class="hljs-string">&quot;武汉&quot;</span>, <span class="hljs-string">&quot;西安&quot;</span>, <span class="hljs-string">&quot;郑州&quot;</span>, <span class="hljs-string">&quot;厦门&quot;</span>, <span class="hljs-string">&quot;南京&quot;</span>, <span class="hljs-string">&quot;济南&quot;</span>]<br>destination = [<span class="hljs-string">&quot;北京&quot;</span>, <span class="hljs-string">&quot;上海&quot;</span>, <span class="hljs-string">&quot;广州&quot;</span>, <span class="hljs-string">&quot;深圳&quot;</span>, <span class="hljs-string">&quot;成都&quot;</span>, <span class="hljs-string">&quot;武汉&quot;</span>, <span class="hljs-string">&quot;西安&quot;</span>, <span class="hljs-string">&quot;郑州&quot;</span>, <span class="hljs-string">&quot;厦门&quot;</span>, <span class="hljs-string">&quot;南京&quot;</span>, <span class="hljs-string">&quot;济南&quot;</span>]<br>train_prefixes = [<span class="hljs-string">&quot;G&quot;</span>, <span class="hljs-string">&quot;D&quot;</span>, <span class="hljs-string">&quot;Z&quot;</span>, <span class="hljs-string">&quot;K&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>, <span class="hljs-string">&quot;T&quot;</span>]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_info</span>():<br>    start_place = random.choice(start)<br>    destination_place = random.choice(destination)<br>    start_date = datetime.datetime.now().replace(year=<span class="hljs-number">2024</span>, month=random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">12</span>), day=random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">28</span>),<br>                                                 hour=random.randint(<span class="hljs-number">7</span>, <span class="hljs-number">23</span>), minute=random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">59</span>), second=<span class="hljs-number">0</span>,<br>                                                 microsecond=<span class="hljs-number">0</span>)<br>    final_state = start_date + datetime.timedelta(hours=random.randint(<span class="hljs-number">2</span>, <span class="hljs-number">24</span>), minutes=random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">59</span>))<br>    train_turn = random.choice(train_prefixes) + <span class="hljs-built_in">str</span>(random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">9999</span>))<br>    price = random.randint(<span class="hljs-number">100</span>, <span class="hljs-number">1200</span>)<br>    <span class="hljs-keyword">return</span> train_turn, price, start_place, destination_place, start_date, final_state<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">reasonable_data</span>(<span class="hljs-params">train_turn, price, start_date, final_state</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;G&#x27;</span> <span class="hljs-keyword">in</span> train_turn:<br>        <span class="hljs-keyword">if</span> final_state - start_date &gt; datetime.timedelta(hours=<span class="hljs-number">12</span>, minutes=<span class="hljs-number">59</span>):<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">elif</span> price &lt;= <span class="hljs-number">400</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;Z&#x27;</span> <span class="hljs-keyword">in</span> train_turn:<br>        <span class="hljs-keyword">if</span> price &gt; <span class="hljs-number">600</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;K&#x27;</span> <span class="hljs-keyword">in</span> train_turn:<br>        <span class="hljs-keyword">if</span> price &gt; <span class="hljs-number">500</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;C&#x27;</span> <span class="hljs-keyword">in</span> train_turn:<br>        <span class="hljs-keyword">if</span> price &gt; <span class="hljs-number">200</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;T&#x27;</span> <span class="hljs-keyword">in</span> train_turn:<br>        <span class="hljs-keyword">if</span> price &gt; <span class="hljs-number">500</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;C:\\Users\\platycodon\\Desktop\\schedule.txt&quot;</span>, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> fp:<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>):<br>        train_turn, price, start_place, destination_place, start_date, final_state = generate_info()<br>        <span class="hljs-keyword">if</span> reasonable_data(train_turn, price, start_date, final_state) == <span class="hljs-literal">True</span>:<br>            res = (<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;train_turn&#125;</span> <span class="hljs-subst">&#123;price&#125;</span> <span class="hljs-subst">&#123;start_place&#125;</span>--&gt;<span class="hljs-subst">&#123;destination_place&#125;</span> <span class="hljs-subst">&#123;start_date&#125;</span> <span class="hljs-subst">&#123;final_state&#125;</span>\n&quot;</span>)<br>            fp.write(res)<br><br><span class="hljs-comment"># 用于获取空气质量的数据信息</span><br><span class="hljs-comment"># import akshare as ak</span><br><span class="hljs-comment"># import pandas as pd</span><br><span class="hljs-comment"># crypto_js_spot_df = ak.air_quality_rank()</span><br><span class="hljs-comment"># pd.set_option(&#x27;display.max_rows&#x27;, None) # 显示全部行</span><br><span class="hljs-comment"># pd.set_option(&#x27;display.max_columns&#x27;, None) # 显示全部列</span><br><span class="hljs-comment"># print(crypto_js_spot_df)</span><br></code></pre></td></tr></table></figure><p><img src="https://krseoul.imgtbl.com/i/2024/06/26/667bd062adc29.png" alt="1719390302657.png"></p><p>还有登陆密码的存储也是修改读入到其中：</p><p><img src="https://krseoul.imgtbl.com/i/2024/06/26/667bcf7ddef51.png" alt="1719390075105.png"></p><p>对于列车信息后来我们使用了爬虫进行获取，但是鉴于测试代码阶段，并没用获得的真实的数据。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> openpyxl <span class="hljs-keyword">import</span> Workbook<br><span class="hljs-keyword">from</span> prettytable <span class="hljs-keyword">import</span> PrettyTable<br><span class="hljs-keyword">from</span> save_city_list <span class="hljs-keyword">import</span> get_city_data<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GetTrains</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, date, begin_id, end_id</span>):<br>        <span class="hljs-comment"># 请求的目标链接</span><br>        self.url = <span class="hljs-string">&quot;https://kyfw.12306.cn/otn/leftTicket/query&quot;</span><br>        <span class="hljs-comment"># cookies</span><br>        self.cookies = &#123;<br>            <span class="hljs-string">&#x27;_uab_collina&#x27;</span>: <span class="hljs-string">&#x27;171324859263120074949415&#x27;</span>,<br>            <span class="hljs-string">&#x27;JSESSIONID&#x27;</span>: <span class="hljs-string">&#x27;708D9C6917F9858184F462E86DC45BD0&#x27;</span>,<br>            <span class="hljs-string">&#x27;_jc_save_fromStation&#x27;</span>: <span class="hljs-string">&#x27;%u82CF%u5DDE%2CSZH&#x27;</span>,<br>            <span class="hljs-string">&#x27;_jc_save_toStation&#x27;</span>: <span class="hljs-string">&#x27;%u6C5D%u5DDE%2CROF&#x27;</span>,<br>            <span class="hljs-string">&#x27;_jc_save_fromDate&#x27;</span>: <span class="hljs-string">&#x27;2024-04-30&#x27;</span>,<br>            <span class="hljs-string">&#x27;_jc_save_wfdc_flag&#x27;</span>: <span class="hljs-string">&#x27;dc&#x27;</span>,<br>            <span class="hljs-string">&#x27;route&#x27;</span>: <span class="hljs-string">&#x27;9036359bb8a8a461c164a04f8f50b252&#x27;</span>,<br>            <span class="hljs-string">&#x27;BIGipServerotn&#x27;</span>: <span class="hljs-string">&#x27;1172832522.24610.0000&#x27;</span>,<br>            <span class="hljs-string">&#x27;BIGipServerpassport&#x27;</span>: <span class="hljs-string">&#x27;854065418.50215.0000&#x27;</span>,<br>            <span class="hljs-string">&#x27;guidesStatus&#x27;</span>: <span class="hljs-string">&#x27;off&#x27;</span>,<br>            <span class="hljs-string">&#x27;highContrastMode&#x27;</span>: <span class="hljs-string">&#x27;defaltMode&#x27;</span>,<br>            <span class="hljs-string">&#x27;cursorStatus&#x27;</span>: <span class="hljs-string">&#x27;off&#x27;</span>,<br>            <span class="hljs-string">&#x27;_jc_save_toDate&#x27;</span>: <span class="hljs-string">&#x27;2024-04-30&#x27;</span>,<br>        &#125;<br>        <span class="hljs-comment"># 构建请求头</span><br>        self.headers = &#123;<br>            <span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;*/*&#x27;</span>,<br>            <span class="hljs-string">&#x27;Accept-Language&#x27;</span>: <span class="hljs-string">&#x27;zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,zh-TW;q=0.5&#x27;</span>,<br>            <span class="hljs-string">&#x27;Cache-Control&#x27;</span>: <span class="hljs-string">&#x27;no-cache&#x27;</span>,<br>            <span class="hljs-string">&#x27;Connection&#x27;</span>: <span class="hljs-string">&#x27;keep-alive&#x27;</span>,<br>            <span class="hljs-string">&#x27;If-Modified-Since&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>            <span class="hljs-string">&#x27;Pragma&#x27;</span>: <span class="hljs-string">&#x27;no-cache&#x27;</span>,<br>            <span class="hljs-string">&#x27;Referer&#x27;</span>: <span class="hljs-string">&#x27;https://www.12306.cn/index/index.html&#x27;</span>,<br>            <span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36 Edg/124.0.0.0&#x27;</span>,<br>            <span class="hljs-string">&#x27;X-Requested-With&#x27;</span>: <span class="hljs-string">&#x27;XMLHttpRequest&#x27;</span>,<br>        &#125;<br>        <span class="hljs-comment"># 构建请求所需参数</span><br>        self.params = &#123;<br>            <span class="hljs-string">&quot;leftTicketDTO.train_date&quot;</span>: date,<br>            <span class="hljs-string">&quot;leftTicketDTO.from_station&quot;</span>: begin_id,<br>            <span class="hljs-string">&quot;leftTicketDTO.to_station&quot;</span>: end_id,<br>            <span class="hljs-string">&quot;purpose_codes&quot;</span>: <span class="hljs-string">&quot;ADULT&quot;</span><br>        &#125;<br>        <span class="hljs-comment"># 实例化美化表格对象</span><br>        self.pt = PrettyTable()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># 对目标网址发送请求</span><br>        res = requests.get(<br>            self.url, headers=self.headers, params=self.params, cookies=self.cookies<br>        ).json()<br>        data_list = res[<span class="hljs-string">&#x27;data&#x27;</span>][<span class="hljs-string">&#x27;result&#x27;</span>]<br>        <span class="hljs-comment"># 构造表格的表头，用于展示和保存</span><br>        header_list = [<br>            [<span class="hljs-string">&#x27;车次&#x27;</span>, <span class="hljs-string">&#x27;出发时间&#x27;</span>, <span class="hljs-string">&#x27;到达时间&#x27;</span>, <span class="hljs-string">&#x27;历时&#x27;</span>, <span class="hljs-string">&#x27;商务座&#x27;</span>, <span class="hljs-string">&#x27;一等座&#x27;</span>, <span class="hljs-string">&#x27;二等座&#x27;</span>, <span class="hljs-string">&#x27;软卧&#x27;</span>, <span class="hljs-string">&#x27;硬卧&#x27;</span>, <span class="hljs-string">&#x27;硬座&#x27;</span>, <span class="hljs-string">&#x27;无座&#x27;</span>, <span class="hljs-string">&#x27;备注&#x27;</span>]<br>        ]<br>        <span class="hljs-comment"># 将表头信息添加进展示表格的表头</span><br>        self.pt.field_names = header_list[<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">for</span> data <span class="hljs-keyword">in</span> data_list:<br>            <span class="hljs-comment"># 格式化添加表数据</span><br>            trains_msg = self.format_data(data)<br>            <span class="hljs-comment"># 将数据添加进列表，用于保存</span><br>            header_list.append(trains_msg)<br>        <span class="hljs-comment"># 打印表格</span><br>        <span class="hljs-built_in">print</span>(self.pt)<br>        <span class="hljs-comment"># 返回车次信息列表</span><br>        <span class="hljs-keyword">return</span> header_list<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">format_data</span>(<span class="hljs-params">self, data</span>):<br>        <span class="hljs-comment"># 将返回的数据以&#x27;|&#x27;进行分隔</span><br>        all_data_list = data.split(<span class="hljs-string">&#x27;|&#x27;</span>)<br>        <span class="hljs-comment"># 提取车次的信息</span><br>        trains_msg = [<br>            all_data_list[<span class="hljs-number">3</span>],<br>            all_data_list[<span class="hljs-number">8</span>],<br>            all_data_list[<span class="hljs-number">9</span>],<br>            all_data_list[<span class="hljs-number">10</span>],<br>            all_data_list[<span class="hljs-number">32</span>] <span class="hljs-keyword">if</span> all_data_list[<span class="hljs-number">32</span>] != <span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;--&quot;</span>,<br>            all_data_list[<span class="hljs-number">31</span>] <span class="hljs-keyword">if</span> all_data_list[<span class="hljs-number">31</span>] != <span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;--&quot;</span>,<br>            all_data_list[<span class="hljs-number">30</span>] <span class="hljs-keyword">if</span> all_data_list[<span class="hljs-number">30</span>] != <span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;--&quot;</span>,<br>            all_data_list[<span class="hljs-number">23</span>] <span class="hljs-keyword">if</span> all_data_list[<span class="hljs-number">23</span>] != <span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;--&quot;</span>,<br>            all_data_list[<span class="hljs-number">28</span>] <span class="hljs-keyword">if</span> all_data_list[<span class="hljs-number">28</span>] != <span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;--&quot;</span>,<br>            all_data_list[<span class="hljs-number">29</span>] <span class="hljs-keyword">if</span> all_data_list[<span class="hljs-number">29</span>] != <span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;--&quot;</span>,<br>            all_data_list[<span class="hljs-number">26</span>] <span class="hljs-keyword">if</span> all_data_list[<span class="hljs-number">26</span>] != <span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;--&quot;</span>,<br>            all_data_list[<span class="hljs-number">1</span>] <span class="hljs-keyword">if</span> all_data_list[<span class="hljs-number">1</span>] != <span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;--&quot;</span><br>        ]<br>        <span class="hljs-comment"># 增添表内容</span><br>        self.pt.add_row(trains_msg)<br>        <span class="hljs-comment"># 将提取的信息返回，用于保存</span><br>        <span class="hljs-keyword">return</span> trains_msg<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">save_data</span>(<span class="hljs-params">self, trains_data_list, date, begin, end</span>):<br>        num = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;如果展示不清晰，需要保存时请扣1：&quot;</span>)<br>        <span class="hljs-keyword">if</span> num == <span class="hljs-string">&quot;1&quot;</span>:<br>            wb = Workbook()<br>            sheet = wb.create_sheet(<span class="hljs-string">&quot;车次信息&quot;</span>, -<span class="hljs-number">1</span>)<br>            <span class="hljs-comment"># 遍历表格索引，写入数据</span><br>            <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(trains_data_list)):<br>                <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(trains_data_list[x])):<br>                    sheet.cell(x + <span class="hljs-number">1</span>, y + <span class="hljs-number">1</span>).value = trains_data_list[x][y]<br>            wb.save(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;date&#125;</span>_<span class="hljs-subst">&#123;begin&#125;</span>_<span class="hljs-subst">&#123;end&#125;</span>.xlsx&quot;</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;数据保存完成！&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-comment"># 更新城市对应的英文代码，需要时再启用</span><br>    <span class="hljs-comment"># get_city_data()</span><br>    date = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入出发日期(YYYY-MM-DD)：&quot;</span>)<br>    begin = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入出发地：&quot;</span>)<br>    end = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入目的地：&quot;</span>)<br>    <span class="hljs-comment"># 读取生成的json文件</span><br>    city_list = json.load(<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;city_data.json&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>))<br>    <span class="hljs-comment"># 获取城市对应的英文代码</span><br>    begin_id = city_list[begin]<br>    end_id = city_list[end]<br>    gt = GetTrains(date, begin_id, end_id)<br>    trains_data_list = gt.run()<br>    <span class="hljs-comment"># 是否需要保存数据</span><br>    gt.save_data(trains_data_list, date, begin, end)<br>    <span class="hljs-built_in">print</span>(<br>        <span class="hljs-string">&quot;12306直达链接(复制到浏览器打开)：&quot;</span>,<br>        <span class="hljs-string">&quot;https://kyfw.12306.cn/otn/leftTicket/init?&quot;</span><br>        <span class="hljs-string">&quot;linktypeid=dc&amp;&quot;</span><br>        <span class="hljs-string">f&quot;fs=<span class="hljs-subst">&#123;begin&#125;</span>,<span class="hljs-subst">&#123;begin_id&#125;</span>&amp;&quot;</span><br>        <span class="hljs-string">f&quot;ts=<span class="hljs-subst">&#123;end&#125;</span>,<span class="hljs-subst">&#123;end_id&#125;</span>&amp;&quot;</span><br>        <span class="hljs-string">f&quot;date=<span class="hljs-subst">&#123;date&#125;</span>&amp;&quot;</span><br>        <span class="hljs-string">&quot;flag=N,N,Y&quot;</span><br>    )<br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#coding=utf-8</span><br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> json<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_city_data</span>():<br>    url = <span class="hljs-string">&quot;https://kyfw.12306.cn/otn/resources/js/framework/station_name.js?station_version=1.9053&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;正在获取数据。&quot;</span>)<br>    <span class="hljs-comment"># 发送请求，获取返回的数据</span><br>    res = requests.get(url)<br>    data = <span class="hljs-built_in">str</span>(res.content, encoding=<span class="hljs-string">&quot;utf8&quot;</span>)<br>    <span class="hljs-comment"># 格式化返回的数据</span><br>    response_format(data)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">response_format</span>(<span class="hljs-params">data</span>):<br>    dict_data = <span class="hljs-built_in">dict</span>()<br>    <span class="hljs-comment"># 根据&#x27;|&#x27;分隔数据</span><br>    list_data = data.split(<span class="hljs-string">&#x27;|&#x27;</span>)<br>    <span class="hljs-comment"># 从下标&#x27;1&#x27;开始, 每间隔5个为字典key</span><br>    result_x = list_data[<span class="hljs-number">1</span>:<span class="hljs-built_in">len</span>(list_data):<span class="hljs-number">5</span>]<br>    <span class="hljs-comment"># 从下标&#x27;2&#x27;开始, 每间隔5个为字典value</span><br>    result_y = list_data[<span class="hljs-number">2</span>:<span class="hljs-built_in">len</span>(list_data):<span class="hljs-number">5</span>]<br>    <span class="hljs-comment"># 循环将数据写入字典</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(result_x)):<br>        dict_data[result_x[i].replace(<span class="hljs-string">&quot; &quot;</span>, <span class="hljs-string">&quot;&quot;</span>)] = result_y[i]<br>    <span class="hljs-comment"># 保存数据</span><br>    save_data(dict_data)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">save_data</span>(<span class="hljs-params">dict_data</span>):<br>    json_data = json.dumps(dict_data, indent=<span class="hljs-number">1</span>, ensure_ascii=<span class="hljs-literal">False</span>)<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;city_data.json&quot;</span>, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> w:<br>        w.write(json_data)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;数据保存完成！&quot;</span>)<br><br><br>get_city_data()<br><br></code></pre></td></tr></table></figure><p><img src="https://krseoul.imgtbl.com/i/2024/06/26/667bd4e58f5ac.png" alt="1719391458122.png"></p><p><img src="https://krseoul.imgtbl.com/i/2024/06/26/667bd5570e0ca.png" alt="1719391570913.png"></p><h5 id="设计过程："><a href="#设计过程：" class="headerlink" title="设计过程："></a>设计过程：</h5><p>​首先我们先写出一个关于登录注册的类，给出我们平常登录时所需要的注册登录过程，对于该类的每个方法需要加上@classmethod，否则两个不同的类之间调用的时候，会因为形参冲突出现报错。然后就考虑需要把数据进行存储，这里用的时json的数据格式，考虑到密码的保密性，对密码进行了一个简单的sha256加密。随后就在写一个类生成Tkinter的GUI界面，把其呈现出来。考虑到现实性，就是如果从未登录的话，要首先进行注册，然后在进行登录；在这期间，如果因为注册时登陆的密码或用户名与数据库中的不匹配，那么就会弹出一个登陆错误的窗口。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> messagebox<br><span class="hljs-keyword">from</span> cowpy <span class="hljs-keyword">import</span> cow<br><span class="hljs-keyword">from</span> pyecharts <span class="hljs-keyword">import</span> options <span class="hljs-keyword">as</span> opts<br><span class="hljs-keyword">from</span> pyecharts.charts <span class="hljs-keyword">import</span> Geo<br><span class="hljs-keyword">from</span> pyecharts.<span class="hljs-built_in">globals</span> <span class="hljs-keyword">import</span> ChartType<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> hashlib<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> os<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">login_signin</span>:<br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">cls, username=<span class="hljs-string">&quot;&quot;</span>, password=<span class="hljs-string">&quot;&quot;</span></span>):<br>        cls.username = username<br>        cls.password = password<br>        cls.data_file = <span class="hljs-string">&quot;..\\模仿12306\\sign_in.txt&quot;</span><br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_registered</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(cls.data_file, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>            data = json.load(file)<br>            username = a<br>            <span class="hljs-keyword">if</span> data[<span class="hljs-string">&#x27;username&#x27;</span>] == username:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">sign</span>(<span class="hljs-params">cls</span>):<br>        cls.username=<span class="hljs-string">&quot;&quot;</span><br>        cls.password=<span class="hljs-string">&quot;&quot;</span><br>        login_data = &#123;<span class="hljs-string">&#x27;username&#x27;</span>: cls.username, <span class="hljs-string">&#x27;password&#x27;</span>: cls.password&#125;<br>        cls.username = a<br>        cls.password = b<br>        login_data.update(&#123;<span class="hljs-string">&#x27;username&#x27;</span>: cls.username, <span class="hljs-string">&#x27;password&#x27;</span>: hashlib.sha256(cls.password.encode()).hexdigest()&#125;)<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;..\\模仿12306\\sign_in.txt&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>            json.dump(login_data, file, ensure_ascii=<span class="hljs-literal">False</span>)<br>        <span class="hljs-keyword">return</span> login_data<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Welcome to the login interface ^v^ &quot;</span>)<br>        file = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;..\\模仿12306\\sign_in.txt&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>        login_data = json.load(file)<br>        cls.username = a<br>        cls.password = b<br>        <span class="hljs-keyword">if</span> login_data[<span class="hljs-string">&#x27;username&#x27;</span>] == cls.username <span class="hljs-keyword">and</span> login_data[<span class="hljs-string">&#x27;password&#x27;</span>] == hashlib.sha256(cls.password.encode()).hexdigest():<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span>(<span class="hljs-title class_ inherited__">Frame</span>):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,master=NONE</span>):<br>        <span class="hljs-built_in">super</span>().__init__(master)<br>        self.master=master<br>        self.pack()<br>        self.creat()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">creat</span>(<span class="hljs-params">self</span>):<br>        self.v=StringVar()<br>        self.v.<span class="hljs-built_in">set</span>(<span class="hljs-number">1</span>)<br>        self.btn01=Radiobutton(self,text=<span class="hljs-string">&quot;注册&quot;</span>,value=<span class="hljs-number">1</span>,variable=self.v)<br>        self.btn01.pack()<br>        self.btn02=Radiobutton(self,text=<span class="hljs-string">&quot;登录&quot;</span>,value=<span class="hljs-number">0</span>,variable=self.v)<br>        self.btn02.pack()<br>        self.bt03=Button(self,text=<span class="hljs-string">&quot;确定&quot;</span>,command=self.confim)<br>        self.bt03.pack()<br>        self.bt04=Button(self,text=<span class="hljs-string">&quot;退出&quot;</span>,command=root.destroy)<br>        self.bt04.pack()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">confim</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">if</span> self.v.get()==<span class="hljs-string">&quot;1&quot;</span>:<br>            <span class="hljs-keyword">global</span> newtk<br>            newtk=Toplevel(root)<br>            newtk.v1=StringVar()<br>            newtk.v1.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;&quot;</span>)<br>            newtk.lab1=Label(newtk,text=<span class="hljs-string">&quot;用户名&quot;</span>,width=<span class="hljs-number">6</span>,height=<span class="hljs-number">2</span>)<br>            newtk.lab1.pack()<br>            Entry(newtk,textvariable=newtk.v1).pack()<br>            newtk.lab2=Label(newtk,text=<span class="hljs-string">&quot;密码&quot;</span>,width=<span class="hljs-number">6</span>,height=<span class="hljs-number">2</span>)<br>            newtk.lab2.pack()<br>            newtk.v2=StringVar()<br>            newtk.v2.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;&quot;</span>)<br>            newtk.en2=Entry(newtk,textvariable=newtk.v2,show=<span class="hljs-string">&quot;*&quot;</span>)<br>            newtk.en2.pack()<br>            Button(newtk,text=<span class="hljs-string">&quot;确定&quot;</span>,command=self.zhuce).pack()<br>            newtk.geometry(<span class="hljs-string">&quot;400x300+200+200&quot;</span>)<br>            newtk.mainloop()<br>        <span class="hljs-keyword">elif</span> self.v.get()==<span class="hljs-string">&quot;0&quot;</span>:<br>            root.destroy()<br>            self.newtk=Tk()<br>            self.newtk.v1=StringVar()<br>            self.newtk.v1.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;&quot;</span>)<br>            self.newtk.lab1=Label(self.newtk,text=<span class="hljs-string">&quot;用户名&quot;</span>,width=<span class="hljs-number">6</span>,height=<span class="hljs-number">2</span>)<br>            self.newtk.lab1.pack()<br>            Entry(self.newtk,textvariable=self.newtk.v1).pack()<br>            self.newtk.lab2=Label(self.newtk,text=<span class="hljs-string">&quot;密码&quot;</span>,width=<span class="hljs-number">6</span>,height=<span class="hljs-number">2</span>)<br>            self.newtk.lab2.pack()<br>            self.newtk.v2=StringVar()<br>            self.newtk.v2.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;&quot;</span>)<br>            self.newtk.en2=Entry(self.newtk,textvariable=self.newtk.v2,show=<span class="hljs-string">&quot;*&quot;</span>)<br>            self.newtk.en2.pack()<br>            Button(self.newtk,text=<span class="hljs-string">&quot;确定&quot;</span>,command=self.denglu).pack()<br>            self.newtk.geometry(<span class="hljs-string">&quot;400x300+200+200&quot;</span>)<br>            self.newtk.mainloop()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">zhuce</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">global</span> a<br>        <span class="hljs-keyword">global</span> b<br>        a=newtk.v1.get()<br>        b=newtk.v2.get()<br>        newtk.destroy()<br>        messagebox.showinfo(<span class="hljs-string">&quot;注册&quot;</span>,<span class="hljs-string">&quot;注册成功,请登录&quot;</span>)<br>        login_signin.sign()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">denglu</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">global</span> a<br>        <span class="hljs-keyword">global</span> b<br>        a=self.newtk.v1.get()<br>        b=self.newtk.v2.get()<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span> (<span class="hljs-string">&quot;..\\模仿12306\\sign_in.txt&quot;</span>) <span class="hljs-keyword">as</span> fp:<br>            data = json.load(fp)<br>            <span class="hljs-keyword">if</span> a==data[<span class="hljs-string">&#x27;username&#x27;</span>]  <span class="hljs-keyword">and</span>   hashlib.sha256(b.encode()).hexdigest()== data[<span class="hljs-string">&#x27;password&#x27;</span>]:<br>                self.newtk.destroy()<br>                messagebox.showinfo(<span class="hljs-string">&quot;登录&quot;</span>,<span class="hljs-string">&quot;登录成功&quot;</span>)<br>                menu()<br>            <span class="hljs-keyword">elif</span> a!=data[<span class="hljs-string">&#x27;username&#x27;</span>]   <span class="hljs-keyword">or</span>  hashlib.sha256(b.encode()).hexdigest()!=data[<span class="hljs-string">&#x27;password&#x27;</span>]  :<br>                messagebox.showinfo(<span class="hljs-string">&quot;登录&quot;</span>,<span class="hljs-string">&quot;用户名或者密码错误,请重新登录&quot;</span>)<br></code></pre></td></tr></table></figure><p>​<img src="https://krseoul.imgtbl.com/i/2024/06/25/667ad6cf945d0.png" alt="1719326408779.png"></p><p><img src="https://krseoul.imgtbl.com/i/2024/06/25/667ad70acc4da.png" alt="1719326471221.png"></p><p><img src="https://krseoul.imgtbl.com/i/2024/06/25/667ad7613a410.png" alt="1719326557711.png"></p><p>登录错误;</p><p><img src="https://krseoul.imgtbl.com/i/2024/06/25/667ad78d8d0f5.png" alt="1719326602651.png"></p><p>第二，把登陆后的界面大致分为客运货运两类：客运和货运</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">menu</span>():<br>    <span class="hljs-keyword">global</span> mutk1<br>    mutk1=Tk()<br>    mutk1.geometry(<span class="hljs-string">&quot;400x300+200+200&quot;</span>)<br>    mutk1.bt1=Button(text=<span class="hljs-string">&quot;客运火车&quot;</span>,command=keyun).pack()<br>    mutk1.bt2=Button(text=<span class="hljs-string">&quot;货运火车&quot;</span>,command=huoyun).pack()<br>    mutk1.bt3=Button(text=<span class="hljs-string">&quot;退出&quot;</span>,command=chuzu).pack()<br>    mutk1.mainloop()<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">keyun</span>():<br>    mutk1.destroy()<br>    choice_train()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">huoyun</span>():<br>    mutk1.destroy()<br>    choice_truck()<br><br><br></code></pre></td></tr></table></figure><p><em>客运</em>：我们分为5个主要功能分别是通过车次类型筛查，乘车时间点筛查，始发地筛查(始发地筛查中有按价格排序，按时间排序。)其中输入按时间排查过后会同时显示出对应的气温最低最高的柱状图。下面附上相应功能的代码和效果图：我们先要读取列车时刻表的数据库中的内容：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_data</span>():<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;..\\模仿12306\\train_schedule.txt&quot;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> fp:<br>        lines = fp.readlines()<br>        result = []<br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines:<br>            line = line.replace(<span class="hljs-string">&#x27;\n&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<br>            result.append(line)<br>    <span class="hljs-keyword">return</span> result<br><br></code></pre></td></tr></table></figure><p>①：车次类型筛查：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">choice_1</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;请输入车次类型(G:高铁，D:动车，Z：直达，K:普快,T:特快，C:城际铁路)：&quot;</span>)<br>    turn = <span class="hljs-built_in">input</span>()<br>    watchable = read_data()<br>    <span class="hljs-keyword">for</span> var <span class="hljs-keyword">in</span> watchable:<br>        <span class="hljs-keyword">if</span> turn <span class="hljs-keyword">in</span> var:<br>            <span class="hljs-built_in">print</span>(var)<br></code></pre></td></tr></table></figure><p><img src="https://krseoul.imgtbl.com/i/2024/06/25/667ad9c4a7584.png" alt="1719327168648.png"></p><p>② 乘车时间的筛查：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">what_is_the_temperature</span>(<span class="hljs-params">date</span>):<br>    low_temperature_sprinter = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>)]<br>    high_temperature_sprinter = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">11</span>,<span class="hljs-number">18</span>)]<br>    low_temperature_summer = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> low_temperature_sprinter]<br>    high_temperature_summer = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> high_temperature_sprinter]<br>    low_temperature_autumn = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">15</span>,<span class="hljs-number">20</span>)]<br>    high_temperature_autumn = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">23</span>,<span class="hljs-number">34</span>)]<br>    high_temperature_winter = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">8</span>,<span class="hljs-number">15</span>)]<br>    low_temperature_winter = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(-<span class="hljs-number">2</span>,<span class="hljs-number">5</span>)]<br>    cities = [<span class="hljs-string">&quot;北京&quot;</span>, <span class="hljs-string">&quot;上海&quot;</span>, <span class="hljs-string">&quot;广州&quot;</span>, <span class="hljs-string">&quot;深圳&quot;</span>, <span class="hljs-string">&quot;成都&quot;</span>, <span class="hljs-string">&quot;武汉&quot;</span>, <span class="hljs-string">&quot;西安&quot;</span>, <span class="hljs-string">&quot;郑州&quot;</span>, <span class="hljs-string">&quot;厦门&quot;</span>, <span class="hljs-string">&quot;南京&quot;</span>, <span class="hljs-string">&quot;济南&quot;</span>]<br>    temperatures = &#123;<br>        <span class="hljs-string">&quot;spring&quot;</span>: &#123;city: &#123;<span class="hljs-string">&quot;max&quot;</span>: random.choice(high_temperature_sprinter), <span class="hljs-string">&quot;min&quot;</span>: random.choice(low_temperature_sprinter)&#125; <span class="hljs-keyword">for</span> city <span class="hljs-keyword">in</span> cities&#125;,<br>        <span class="hljs-string">&quot;summer&quot;</span>: &#123;city: &#123;<span class="hljs-string">&quot;max&quot;</span>: random.choice(high_temperature_summer), <span class="hljs-string">&quot;min&quot;</span>: random.choice(low_temperature_summer)&#125;<span class="hljs-keyword">for</span> city <span class="hljs-keyword">in</span> cities&#125;,<br>        <span class="hljs-string">&quot;autumn&quot;</span>: &#123;city: &#123;<span class="hljs-string">&quot;max&quot;</span>: random.choice(high_temperature_autumn), <span class="hljs-string">&quot;min&quot;</span>: random.choice(low_temperature_autumn)&#125; <span class="hljs-keyword">for</span> city <span class="hljs-keyword">in</span> cities&#125;,<br>        <span class="hljs-string">&quot;winter&quot;</span>: &#123;city: &#123;<span class="hljs-string">&quot;max&quot;</span>:random.choice(high_temperature_winter), <span class="hljs-string">&quot;min&quot;</span>:random.choice(low_temperature_winter)&#125; <span class="hljs-keyword">for</span> city <span class="hljs-keyword">in</span> cities&#125;<br>    &#125;<br>    plt.rc(<span class="hljs-string">&quot;font&quot;</span>, family=<span class="hljs-string">&#x27;Microsoft YaHei&#x27;</span>)  <span class="hljs-comment"># 这里的用途确保中文能够输出 ！！！</span><br>    plt.figure(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">6</span>))<br>    x_values = np.arange(<span class="hljs-built_in">len</span>(cities))  <span class="hljs-comment"># 城市的索引位置</span><br>    bar_width = <span class="hljs-number">0.35</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">int</span>(date[<span class="hljs-number">6</span>]) &gt;=<span class="hljs-number">3</span> <span class="hljs-keyword">and</span> <span class="hljs-built_in">int</span>(date[<span class="hljs-number">6</span>]) &lt;= <span class="hljs-number">5</span>:<br>        max_temperature = [temperatures[<span class="hljs-string">&quot;spring&quot;</span>][i][<span class="hljs-string">&quot;max&quot;</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> cities]<br>        min_temperature = [temperatures[<span class="hljs-string">&quot;spring&quot;</span>][j][<span class="hljs-string">&quot;min&quot;</span>] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> cities]<br>        plt.bar(x_values, max_temperature,bar_width, align=<span class="hljs-string">&#x27;center&#x27;</span>,label = <span class="hljs-string">&#x27;Temperature&#x27;</span>, color=<span class="hljs-string">&#x27;blue&#x27;</span>)<br>        plt.bar(x_values+bar_width, min_temperature,bar_width,align=<span class="hljs-string">&#x27;center&#x27;</span>,label = <span class="hljs-string">&#x27;Temperature&#x27;</span>, color=<span class="hljs-string">&#x27;yellow&#x27;</span>)<br>        plt.xlabel(<span class="hljs-string">&quot;Cities&quot;</span>)<br>        plt.ylabel(<span class="hljs-string">&quot;Temperature&quot;</span>)<br>        plt.title(<span class="hljs-string">&quot;Temperature of cities&quot;</span>)<br>        plt.xticks(x_values + bar_width / <span class="hljs-number">2</span>, cities, rotation=<span class="hljs-number">45</span>)<br>        plt.legend()<br>        plt.show()<br>    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">int</span>(date[<span class="hljs-number">6</span>]) &gt;=<span class="hljs-number">6</span> <span class="hljs-keyword">and</span> <span class="hljs-built_in">int</span>(date[<span class="hljs-number">6</span>]) &lt;=<span class="hljs-number">8</span>:<br>        max_temperature = [temperatures[<span class="hljs-string">&quot;summer&quot;</span>][i][<span class="hljs-string">&quot;max&quot;</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> cities]<br>        min_temperature = [temperatures[<span class="hljs-string">&quot;summer&quot;</span>][j][<span class="hljs-string">&quot;min&quot;</span>] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> cities]<br>        plt.bar(x_values, max_temperature,bar_width, align=<span class="hljs-string">&#x27;center&#x27;</span>,label = <span class="hljs-string">&#x27;Temperature&#x27;</span>, color=<span class="hljs-string">&#x27;blue&#x27;</span>)<br>        plt.bar(x_values+bar_width, min_temperature,bar_width,align=<span class="hljs-string">&#x27;center&#x27;</span>,label = <span class="hljs-string">&#x27;Temperature&#x27;</span>, color=<span class="hljs-string">&#x27;yellow&#x27;</span>)<br>        plt.xlabel(<span class="hljs-string">&quot;Cities&quot;</span>)<br>        plt.ylabel(<span class="hljs-string">&quot;Temperature&quot;</span>)<br>        plt.title(<span class="hljs-string">&quot;Temperature of cities&quot;</span>)<br>        plt.xticks(x_values + bar_width / <span class="hljs-number">2</span>, cities, rotation=<span class="hljs-number">45</span>)<br>        plt.legend()<br>        plt.show()<br>    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">int</span>(date[<span class="hljs-number">6</span>]) &gt;=<span class="hljs-number">9</span> <span class="hljs-keyword">and</span> <span class="hljs-built_in">int</span>(date[<span class="hljs-number">6</span>]) &lt;= <span class="hljs-number">11</span>:<br>        max_temperature = [temperatures[<span class="hljs-string">&quot;autumn&quot;</span>][i][<span class="hljs-string">&quot;max&quot;</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> cities]<br>        min_temperature = [temperatures[<span class="hljs-string">&quot;autumn&quot;</span>][j][<span class="hljs-string">&quot;min&quot;</span>] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> cities]<br>        plt.bar(x_values, max_temperature,bar_width, align=<span class="hljs-string">&#x27;center&#x27;</span>,label = <span class="hljs-string">&#x27;Temperature&#x27;</span>, color=<span class="hljs-string">&#x27;blue&#x27;</span>)<br>        plt.bar(x_values+bar_width, min_temperature,bar_width,align=<span class="hljs-string">&#x27;center&#x27;</span>,label = <span class="hljs-string">&#x27;Temperature&#x27;</span>, color=<span class="hljs-string">&#x27;yellow&#x27;</span>)<br>        plt.xlabel(<span class="hljs-string">&quot;Cities&quot;</span>)<br>        plt.ylabel(<span class="hljs-string">&quot;Temperature&quot;</span>)<br>        plt.title(<span class="hljs-string">&quot;Temperature of cities&quot;</span>)<br>        plt.xticks(x_values + bar_width / <span class="hljs-number">2</span>, cities, rotation=<span class="hljs-number">45</span>)<br>        plt.legend()<br>        plt.show()<br>    <span class="hljs-keyword">else</span>:<br>        max_temperature = [temperatures[<span class="hljs-string">&quot;winter&quot;</span>][i][<span class="hljs-string">&quot;max&quot;</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> cities]<br>        min_temperature = [temperatures[<span class="hljs-string">&quot;winter&quot;</span>][j][<span class="hljs-string">&quot;min&quot;</span>] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> cities]<br>        plt.bar(x_values, max_temperature,bar_width, align=<span class="hljs-string">&#x27;center&#x27;</span>,label = <span class="hljs-string">&#x27;Temperature&#x27;</span>, color=<span class="hljs-string">&#x27;blue&#x27;</span>)<br>        plt.bar(x_values+bar_width, min_temperature,bar_width,align=<span class="hljs-string">&#x27;center&#x27;</span>,label = <span class="hljs-string">&#x27;Temperature&#x27;</span>, color=<span class="hljs-string">&#x27;yellow&#x27;</span>)<br>        plt.xlabel(<span class="hljs-string">&quot;Cities&quot;</span>)<br>        plt.ylabel(<span class="hljs-string">&quot;Temperature&quot;</span>)<br>        plt.title(<span class="hljs-string">&quot;Temperature of cities&quot;</span>)<br>        plt.xticks(x_values + bar_width / <span class="hljs-number">2</span>, cities, rotation=<span class="hljs-number">45</span>)<br>        plt.legend()<br>        plt.show()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">choice_2</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;请输入所需时间点：&quot;</span>)<br>    time_start = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;样例：2024-11-20 08:32:00&quot;</span>)<br>    time_see = read_data()<br>    <span class="hljs-keyword">for</span> var <span class="hljs-keyword">in</span> time_see:<br>        <span class="hljs-keyword">if</span> time_start <span class="hljs-keyword">in</span> var:<br>            <span class="hljs-built_in">print</span>(var)<br>            what_is_the_temperature(time_start.split()[<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><p>运行结果如下图：</p><p><img src="https://krseoul.imgtbl.com/i/2024/06/26/667c0cf62997a.png" alt="1719405811607.png"></p><p><img src="https://krseoul.imgtbl.com/i/2024/06/25/667adb684508a.png" alt="1719327588746.png"></p><p>③ 始发地：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">choice_3</span>():<br>    start = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;出发地：&quot;</span>)<br>    destination = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;目的地：&quot;</span>)<br>    place = read_data()<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;..\\模仿12306\\specific_city.txt&quot;</span>, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file_:<br>        <span class="hljs-keyword">for</span> var <span class="hljs-keyword">in</span> place:<br>            <span class="hljs-keyword">if</span> <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;start&#125;</span>--&gt;<span class="hljs-subst">&#123;destination&#125;</span>&quot;</span> <span class="hljs-keyword">in</span> var.split()[<span class="hljs-number">2</span>]:<br>                file_.write(var + <span class="hljs-string">&#x27;\n&#x27;</span>)<br>                <span class="hljs-built_in">print</span>(var)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">choice_3_1</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;1.按价格排序&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;2.按时间排序&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;3.退出&quot;</span>)<br>    choice = <span class="hljs-built_in">input</span>()<br>    <span class="hljs-keyword">if</span> choice == <span class="hljs-string">&quot;1&quot;</span>:<br>        price_sort()<br>        <span class="hljs-keyword">return</span> choice_3_1()<br>    <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&quot;2&quot;</span>:<br>        time_sort()<br>        <span class="hljs-keyword">return</span> choice_3_1()<br>    <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">&quot;3&quot;</span>:<br>        <span class="hljs-keyword">return</span> choice_train()<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Invalid&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">mix_choice_3</span>():<br>    choice_3()<br>    choice_3_1()<br></code></pre></td></tr></table></figure><p><img src="https://krseoul.imgtbl.com/i/2024/06/26/667c0d974e4a8.png" alt="1719405973127.png"></p><p>④：按价格排序：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">price_sort</span>():<br>    d=<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;..\\模仿12306\\train_schedule.txt&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>,encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>    c=[<span class="hljs-string">&quot;&quot;</span>]<br>    b=<span class="hljs-string">&quot;&quot;</span><br>    e=[]<br>    f=[]<br>    p=<span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-keyword">while</span> c!=[]:<br>        c=d.readline().split()<br>        <span class="hljs-keyword">if</span> c!=[]:<br>            f+=[c]<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(f)):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(f[j][<span class="hljs-number">1</span>])):<br>            <span class="hljs-keyword">if</span> f[j][<span class="hljs-number">1</span>][i]==<span class="hljs-string">&quot;y&quot;</span>:<br>                <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">else</span>:<br>                b+=f[j][<span class="hljs-number">1</span>][i]<br>        e+=[<span class="hljs-built_in">eval</span>(b)]<br>        b=<span class="hljs-string">&quot;&quot;</span><br>    pai=&#123;&#125;<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(e)):<br>        pai[e[i]]=i<br>    e.sort()<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(e)):<br>        d=<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;..\\模仿12306\\train_schedule.txt&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>,encoding=<span class="hljs-string">&quot;utf-8&quot;</span>)<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(e)):<br>            <span class="hljs-keyword">if</span> j !=pai[e[i]]:<br>                p=d.readline()<br>            <span class="hljs-keyword">elif</span> j==pai[e[i]]:<br>                p=d.readline()<br>                <span class="hljs-built_in">print</span>(p)<br>    d.close()<br></code></pre></td></tr></table></figure><p><img src="https://krseoul.imgtbl.com/i/2024/06/26/667c0ddd349a3.png" alt="1719406038752.png"></p><p>⑤ 按时间差大小排序：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">time_sum</span>(<span class="hljs-params">x</span>):<br>    a=x[<span class="hljs-number">1</span>]*<span class="hljs-number">30</span>*<span class="hljs-number">24</span>*<span class="hljs-number">60</span>+x[<span class="hljs-number">2</span>]*<span class="hljs-number">24</span>*<span class="hljs-number">60</span>+x[<span class="hljs-number">3</span>]*<span class="hljs-number">60</span>+x[<span class="hljs-number">4</span>]<br>    <span class="hljs-keyword">return</span> a<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">time_sort</span>():<br>    a=[]<br>    d=<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;..\\模仿12306\\train_schedule.txt&quot;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>    c=[<span class="hljs-string">&quot;&quot;</span>]<br>    b=<span class="hljs-number">0</span><br>    e=[]<br>    f=[]<br>    p=<span class="hljs-string">&quot;&quot;</span><br>    o=[]<br>    shijian=[]<br>    <span class="hljs-keyword">while</span> c!=[]:<br>        c=d.readline().split()<br>        <span class="hljs-keyword">if</span> c!=[]:<br>            f+=[c]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(f)):<br>        a=f[i][<span class="hljs-number">3</span>].split(<span class="hljs-string">&quot;-&quot;</span>)+f[i][<span class="hljs-number">4</span>].split(<span class="hljs-string">&quot;:&quot;</span>)<br>        <span class="hljs-keyword">for</span> g <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(a)):<br>            a[g]=<span class="hljs-built_in">int</span>(a[g])<br>        e+=[a]<br>        a=[]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(f)):<br>        a=f[i][<span class="hljs-number">5</span>].split(<span class="hljs-string">&quot;-&quot;</span>)+f[i][<span class="hljs-number">6</span>].split(<span class="hljs-string">&quot;:&quot;</span>)<br>        <span class="hljs-keyword">for</span> g <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(a)):<br>            a[g]=<span class="hljs-built_in">int</span>(a[g])<br>        o+=[a]<br>        a=[]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(e)):<br>        b+=time_sum(o[i])-time_sum(e[i])<br>        shijian+=[b]<br>        b=<span class="hljs-number">0</span><br>    suoyin=&#123;&#125;<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(shijian)):<br>        suoyin[shijian[i]]=i<br>    shijian.sort()<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(shijian)):<br>        d=<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;..\\模仿12306\\train_schedule.txt&quot;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(shijian)):<br>            <span class="hljs-keyword">if</span> j !=suoyin[shijian[i]]:<br>                p=d.readline()<br>            <span class="hljs-keyword">elif</span> j==suoyin[shijian[i]]:<br>                p=d.readline()<br>                <span class="hljs-built_in">print</span>(p)<br>    d.close()<br></code></pre></td></tr></table></figure><p><img src="C:\Users\platycodon\AppData\Roaming\Typora\typora-user-images\image-20240626204844488.png" alt="image-20240626204844488"></p><p>⑥ 查看全国城市AQI指数：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">air_AQI</span>():<br>    keys = [<span class="hljs-string">&quot;北京&quot;</span>, <span class="hljs-string">&quot;上海&quot;</span>, <span class="hljs-string">&quot;广州&quot;</span>, <span class="hljs-string">&quot;深圳&quot;</span>, <span class="hljs-string">&quot;成都&quot;</span>, <span class="hljs-string">&quot;武汉&quot;</span>, <span class="hljs-string">&quot;西安&quot;</span>, <span class="hljs-string">&quot;郑州&quot;</span>, <span class="hljs-string">&quot;厦门&quot;</span>, <span class="hljs-string">&quot;南京&quot;</span>, <span class="hljs-string">&quot;济南&quot;</span>]<br>    values = [<span class="hljs-number">204.0</span>, <span class="hljs-number">59.0</span>, <span class="hljs-number">71.0</span>, <span class="hljs-number">38.0</span>, <span class="hljs-number">53.0</span>, <span class="hljs-number">89.0</span>, <span class="hljs-number">99.0</span>, <span class="hljs-number">95.0</span>, <span class="hljs-number">62.0</span>, <span class="hljs-number">56.0</span>, <span class="hljs-number">161.0</span>]<br><br>    c = (<br>        Geo()<br>        .add_schema(maptype=<span class="hljs-string">&quot;china&quot;</span>)<br>        .add(<br>            <span class="hljs-string">&quot;空气质量AOI指数图&quot;</span>,<br>            [<span class="hljs-built_in">list</span>(z) <span class="hljs-keyword">for</span> z <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(keys, values)],<br>            type_=ChartType.EFFECT_SCATTER,<br>        )<br>        .set_series_opts(label_opts=opts.LabelOpts(is_show=<span class="hljs-literal">False</span>))<br>        .set_global_opts(title_opts=opts.TitleOpts(title=<span class="hljs-string">&quot;全国主要城市空气质量AQI图&quot;</span>))<br>        .render()<br>    )<br>    <span class="hljs-comment"># 打开html</span><br>    os.system(<span class="hljs-string">&quot;render.html&quot;</span>)<br></code></pre></td></tr></table></figure><p><img src="https://krseoul.imgtbl.com/i/2024/06/25/667adf4b619c6.png" alt="1719328583423.png"></p><p>其中蓝点能够显示AQI指数：</p><p><img src="C:\Users\platycodon\AppData\Roaming\Typora\typora-user-images\image-20240625233623070.png" alt="image-20240625233623070"></p><p>⑦退出：</p><p><img src="https://krseoul.imgtbl.com/i/2024/06/26/667c0f10d67b7.png" alt="1719406349144.png"></p><p>整个过程都整合到下面的函数代码中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">choice_train</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;=== 车票查询 ===&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;1.车次类型：&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;2.乘车时间点：&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;3.始发地：&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;4.查看全国城市AQI指数&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;5.退出&quot;</span>)<br>    n = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入数字：&quot;</span>)<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-string">&#x27;1&#x27;</span>:<br>        choice_1()<br>    <span class="hljs-keyword">elif</span> n == <span class="hljs-string">&#x27;2&#x27;</span>:<br>        choice_2()<br>    <span class="hljs-keyword">elif</span> n == <span class="hljs-string">&#x27;3&#x27;</span>:<br>        mix_choice_3()<br>    <span class="hljs-keyword">elif</span> n == <span class="hljs-string">&#x27;4&#x27;</span>:<br>        air_AQI()  <span class="hljs-comment">#这里返回的是html界面</span><br>        <span class="hljs-keyword">return</span> choice_train()<br>    <span class="hljs-keyword">elif</span> n == <span class="hljs-string">&#x27;5&#x27;</span>:<br>        <span class="hljs-keyword">return</span> menu()<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;invalid,rewrite!!!&quot;</span>)<br>        <span class="hljs-keyword">return</span> choice_train()<br></code></pre></td></tr></table></figure><p><em>货运</em>：</p><p>这里的货运实现的是寄货运货的功能，里面涉及到的距离是通过运用haversine公式，通过两地的经纬度计算出两地的距离。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">haversine</span>(<span class="hljs-params">lat1, lon1, lat2, lon2</span>):<br>    <span class="hljs-keyword">import</span> math<br>    <span class="hljs-keyword">if</span> lat1 &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> lat1 &gt; <span class="hljs-number">90</span> <span class="hljs-keyword">or</span> lat2 &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> lat2 &gt; <span class="hljs-number">90</span> <span class="hljs-keyword">or</span> lon1 &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> lon1 &gt; <span class="hljs-number">180</span> <span class="hljs-keyword">or</span> lon2 &gt; <span class="hljs-number">180</span> <span class="hljs-keyword">or</span> lon2 &lt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Sorry, I don&#x27;t understand&quot;</span><br>    <span class="hljs-keyword">else</span>:<br>        r = <span class="hljs-number">6371</span><br>        lat1_radians = (lat1/<span class="hljs-number">180</span>)*math.pi<br>        lat2_radians = (lat2/<span class="hljs-number">180</span>)*math.pi<br>        lon1_radians = (lon1/<span class="hljs-number">180</span>)*math.pi<br>        lon2_radians = (lon2/<span class="hljs-number">180</span>)*math.pi<br>        d = <span class="hljs-number">2</span> * r * math.asin(math.sqrt((math.sin((lat2_radians-lat1_radians) / <span class="hljs-number">2</span>)) ** <span class="hljs-number">2</span> + math.cos(lat1_radians) * math.cos(lat2_radians) * (math.sin((lon2_radians-lon1_radians) / <span class="hljs-number">2</span>)) ** <span class="hljs-number">2</span>))<br>    <span class="hljs-keyword">return</span> d<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">place_station</span>():<br>    l =[]<br>    station = [<span class="hljs-string">&quot;北京&quot;</span>, <span class="hljs-string">&quot;上海&quot;</span>, <span class="hljs-string">&quot;广州&quot;</span>, <span class="hljs-string">&quot;深圳&quot;</span>, <span class="hljs-string">&quot;成都&quot;</span>, <span class="hljs-string">&quot;武汉&quot;</span>, <span class="hljs-string">&quot;西安&quot;</span>, <span class="hljs-string">&quot;郑州&quot;</span>, <span class="hljs-string">&quot;厦门&quot;</span>, <span class="hljs-string">&quot;南京&quot;</span>, <span class="hljs-string">&quot;济南&quot;</span>]<br>    <span class="hljs-keyword">for</span> element <span class="hljs-keyword">in</span> station:<br>        <span class="hljs-keyword">for</span> element1 <span class="hljs-keyword">in</span> station:<br>            ans = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;element&#125;</span>--&gt;<span class="hljs-subst">&#123;element1&#125;</span>&quot;</span><br>            <span class="hljs-keyword">if</span> element == element1:<br>                <span class="hljs-keyword">pass</span><br>            <span class="hljs-keyword">else</span>:<br>                l.append(ans)<br>    <span class="hljs-keyword">return</span> l<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">distance</span>():<br>    l = []<br>    place_ = &#123;<span class="hljs-string">&quot;北京&quot;</span>:(<span class="hljs-number">116.328175</span>,<span class="hljs-number">39.900772</span>), <span class="hljs-string">&quot;上海&quot;</span>:(<span class="hljs-number">121.326533</span>,<span class="hljs-number">31.200282</span>), <span class="hljs-string">&quot;广州&quot;</span>:(<span class="hljs-number">113.264499</span>,<span class="hljs-number">23.130061</span>), <span class="hljs-string">&quot;深圳&quot;</span>:(<span class="hljs-number">114.057939</span>,<span class="hljs-number">22.543527</span>), <span class="hljs-string">&quot;成都&quot;</span>:(<span class="hljs-number">104.066301</span>,<span class="hljs-number">30.572961</span>), <span class="hljs-string">&quot;武汉&quot;</span>:(<span class="hljs-number">114.304569</span>,<span class="hljs-number">30.593354</span>), <span class="hljs-string">&quot;西安&quot;</span>:(<span class="hljs-number">108.939645</span>,<span class="hljs-number">34.343207</span>), <span class="hljs-string">&quot;郑州&quot;</span>:(<span class="hljs-number">113.625351</span>,<span class="hljs-number">34.746303</span>), <span class="hljs-string">&quot;厦门&quot;</span>:(<span class="hljs-number">113.625351</span>,<span class="hljs-number">34.746303</span>), <span class="hljs-string">&quot;南京&quot;</span>:(<span class="hljs-number">118.796624</span>,<span class="hljs-number">32.059344</span>), <span class="hljs-string">&quot;济南&quot;</span>:(<span class="hljs-number">117.120128</span>,<span class="hljs-number">36.652069</span>)&#125;<br>    <span class="hljs-keyword">for</span> place <span class="hljs-keyword">in</span> place_:<br>        <span class="hljs-keyword">for</span> place1 <span class="hljs-keyword">in</span> place_:<br>            lat1,lon1 = place_[place][<span class="hljs-number">1</span>],place_[place][<span class="hljs-number">0</span>]<br>            lat2,lon2 = place_[place1][<span class="hljs-number">1</span>],place_[place1][<span class="hljs-number">0</span>]<br>            res = haversine(lat1,lon1,lat2,lon2)<br>            <span class="hljs-keyword">if</span> res == <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">pass</span><br>            <span class="hljs-keyword">else</span>:<br>                l.append(<span class="hljs-built_in">round</span>(res,<span class="hljs-number">1</span>))<br>    place_name = place_station()<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">zip</span>(place_name,l))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">weigh</span>(<span class="hljs-params">mass</span>):<br>    <span class="hljs-keyword">if</span> mass &lt;= <span class="hljs-number">2.5</span>*<span class="hljs-number">10</span>**<span class="hljs-number">3</span>:<br>        res = mass*<span class="hljs-number">0.5</span><br>        <span class="hljs-keyword">return</span> res<br>    <span class="hljs-keyword">elif</span> mass &gt; <span class="hljs-number">2.5</span>*<span class="hljs-number">10</span>**<span class="hljs-number">3</span> <span class="hljs-keyword">and</span> mass &lt;= <span class="hljs-number">5</span>*<span class="hljs-number">10</span>**<span class="hljs-number">3</span>:<br>        res = mass*<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br>    <span class="hljs-keyword">else</span>:<br>        res = mass*<span class="hljs-number">2</span><br>        <span class="hljs-keyword">return</span> res<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">price</span>():<br>    mass = <span class="hljs-built_in">float</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入你的货物质量(1.0)&quot;</span>))<br>    price_station = distance()<br>    l = []<br>    <span class="hljs-keyword">for</span> dis <span class="hljs-keyword">in</span> price_station:<br>        temp = price_station[dis]<br>        price = temp*weigh(mass)<br>        l.append(price)<br>    place_name = place_station()<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">zip</span>(place_name,l))<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">choice_truck</span>():<br>    start_place = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入你的出发地：&quot;</span>)<br>    final_place = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入你的寄件地：&quot;</span>)<br>    place = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;start_place&#125;</span>--&gt;<span class="hljs-subst">&#123;final_place&#125;</span>&quot;</span><br>    dictionary = price()<br>    <span class="hljs-keyword">for</span> vara <span class="hljs-keyword">in</span> dictionary.keys():<br>        <span class="hljs-keyword">if</span> place == vara:<br>            <span class="hljs-built_in">print</span>(dictionary[vara])<br>    <span class="hljs-keyword">return</span> menu()<br></code></pre></td></tr></table></figure><p><img src="https://krseoul.imgtbl.com/i/2024/06/26/667b974d738f2.png" alt="1719375689507.png"></p><p>最后就是退出功能了，这里在退出时设计了一个小弹窗，通过cowsay板块稍加渲染，展示出一幅活泼的画面。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">chuzu</span>():<br>    mutk1.destroy()<br>    messagebox.showinfo(<span class="hljs-string">&quot;感谢使用&quot;</span>,cow_say())<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">cow_say</span>():<br>    msg = cow.milk_random_cow(<span class="hljs-string">&quot;Zaku,Zaku,Zaku,Zaku&quot;</span>)<br>    <span class="hljs-keyword">return</span> msg<br></code></pre></td></tr></table></figure><p><img src="https://krseoul.imgtbl.com/i/2024/06/26/667b983878760.png" alt="1719375925780.png"></p><p>总结：</p><p>​经过这次项目的设计，使全组成员对python有了一个更深层次的理解。而且还同时锻炼了编程思维，在一定程度上还锻炼出一种创造力。不仅如此，还形成了攻坚克难，积极学习，团结一致的良好的团队精神。在debug环节中感受到了修改代码的苦与修改成功的乐，还顺带对相应知识的深刻理解与感悟。</p><p>​正是因为这样敢于试错，不怕困难的精神，才能够使该项目呈现出来。以后的学习中，我们还需不断磨练自己，是自己最后能够真正的成为一个能人巧匠。</p><p>未来程序改进：</p><p>首先针对整个程序的GUI和一些可视化界面在做不断的完善，实现全部的可视化；其次因为我们的数据库是通过随机生成的伪数据，不够精准，需要把所有数据替换成爬虫得到的数据，然后就是对于两点间的铁路距离问题，可以创建一个机器学习的大模型进行不断的训练，然后得到全国范围内的两地之间的火车站的距离。</p>]]></content>
    
    
    <categories>
      
      <category>practice</category>
      
    </categories>
    
    
    <tags>
      
      <tag>课设小项目</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python_practice2</title>
    <link href="/2024/04/12/python-practice2/"/>
    <url>/2024/04/12/python-practice2/</url>
    
    <content type="html"><![CDATA[<h1 id="python-practice2-一些题目"><a href="#python-practice2-一些题目" class="headerlink" title="python_practice2(一些题目)"></a>python_practice2(<del>一些题目</del>)</h1><h2 id="practice1"><a href="#practice1" class="headerlink" title="practice1"></a>practice1</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">从键盘读入一个数n，输出小于或等于n的所有素数的个数。<br>example<br><span class="hljs-built_in">input</span>:<br><span class="hljs-number">100</span><br>output:<br><span class="hljs-number">25</span><br><span class="hljs-built_in">input</span>:<br><span class="hljs-number">200</span><br>output:<br><span class="hljs-number">46</span><br></code></pre></td></tr></table></figure><p>这个题目简单明了，是一个求小于等于它以内的素数个数，此时的逻辑应该是我们要定义一个函数先进行判断是否为素数，然后再用计数器用来计数即可。其实直接用</p><p>Crypto库里的isPrime函数直接一劳永逸。但这里我还是尝试手搓了一下函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">isprime</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,n):<br>        <span class="hljs-keyword">if</span> n % i == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>isprime(n)<br>count =<span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> isprime(j) == <span class="hljs-literal">True</span>:<br>        count +=<span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(count)<br></code></pre></td></tr></table></figure><h2 id="practice2"><a href="#practice2" class="headerlink" title="practice2"></a>practice2</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">从键盘输入一个正整数n，输出小于n的所有与其互素的数的个数。（即求（n）的值）。例如：与<span class="hljs-number">10</span>互素的数为：<span class="hljs-number">9</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>一共<span class="hljs-number">4</span>个。<br></code></pre></td></tr></table></figure><p>这个题目明显是欧拉函数，如果在sage里面可以直接用euler_phi的函数，那么这里面我们需要在明白欧拉函数后再进行写，这里不做赘述。直接上代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">euler_phi</span>(<span class="hljs-params">n</span>):<br>    result = n   <br>    p = <span class="hljs-number">2</span><br>    <span class="hljs-keyword">while</span>(p * p &lt;= n):<br>        <span class="hljs-keyword">if</span> (n % p == <span class="hljs-number">0</span>):<br>            <span class="hljs-keyword">while</span> (n % p == <span class="hljs-number">0</span>):<br>                n //= p<br>            result -= result // p<br>        p += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> (n &gt; <span class="hljs-number">1</span>):     <br>        result -= result // n<br>    <span class="hljs-built_in">print</span>(result)<br>euler_phi(n)<br></code></pre></td></tr></table></figure><h2 id="practice3"><a href="#practice3" class="headerlink" title="practice3"></a>practice3</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">从键盘接受一个正整数n，生成一个由<span class="hljs-number">1</span>~n的数组。输出一个数组，数组中的每个元素为与前面数组中小于自身的互素的数的个数。<br><br>example:<br><span class="hljs-built_in">input</span>:<br><span class="hljs-number">10</span><br>output:<br>[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>]<br><span class="hljs-built_in">input</span>:<br><span class="hljs-number">20</span><br>output:<br>[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>, <span class="hljs-number">10</span>, <span class="hljs-number">4</span>, <span class="hljs-number">12</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">16</span>, <span class="hljs-number">6</span>, <span class="hljs-number">18</span>, <span class="hljs-number">8</span>]<br></code></pre></td></tr></table></figure><h3 id="生成1-n的数组"><a href="#生成1-n的数组" class="headerlink" title="生成1-n的数组"></a>生成1-n的数组</h3><p>开始的时候我们可以用列表解析对我们平常写的代码进行一个优化：</p><ul><li><p>基本语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">[expression <span class="hljs-keyword">for</span> iter_val <span class="hljs-keyword">in</span> iterable]<br>[expression <span class="hljs-keyword">for</span> iter_val <span class="hljs-keyword">in</span> iterable <span class="hljs-keyword">if</span> cond_expr]<br></code></pre></td></tr></table></figure></li></ul><p>该优化可以在列表解析，筛选条件，嵌套循环，字典解析，集合解析中进行使用。</p><p>例如1-n我们可以用i for i in range(n+1)。</p><p>回到这道题目上面，因为要判断互质我们可以自己手搓一个gcd函数，也可以用math库里的gcd函数。这里我直接用math库里的gcd函数进行书写。然后通过挨个的互质判断确定个数。因为你这里要考虑到挨个进行比大小，所以一个循环是不够的我们可以考虑循环嵌套(就是大循环所在的数与自己前面的所有数进行互质判断)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>l1 = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>)]<br>l2 = []<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    count = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, i):<br>        <span class="hljs-keyword">if</span> math.gcd(l1[i-<span class="hljs-number">1</span>], l1[j-<span class="hljs-number">1</span>]) == <span class="hljs-number">1</span>:<span class="hljs-comment">#这里采取i-1,j-1是因为不要超出范围</span><br>            count += <span class="hljs-number">1</span><br>    l2.append(count)<br><span class="hljs-built_in">print</span>(l2)<br></code></pre></td></tr></table></figure><h2 id="practice4"><a href="#practice4" class="headerlink" title="practice4"></a>practice4</h2><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">从键盘输入一个<span class="hljs-built_in">n</span>，打印一个等腰三角形。<br></code></pre></td></tr></table></figure><p>这个题目很明显是循环。而且等腰三角形1，3，5，7……明显是一个等差数列，但是如果只是考虑等差数列的话会发现你会打印出来的是个直角三角形。仔细思考，发现空格也是等差数列排布，与*的等差数列是恰好相反的。所以我们就可以同时用一个循环进行打印，代码如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    spaces = <span class="hljs-string">&#x27; &#x27;</span> * (n - i)<br>    stars = <span class="hljs-string">&#x27;*&#x27;</span> * (<span class="hljs-number">2</span> * i - <span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(spaces + stars)<br></code></pre></td></tr></table></figure><h2 id="practice-5"><a href="#practice-5" class="headerlink" title="practice 5"></a>practice 5</h2><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">从键盘输入一个<span class="hljs-built_in">n</span>，打印菱形<br></code></pre></td></tr></table></figure><p>这里的菱形借用了上道等腰三角形的思路，以中间最长的那行为界限，我们很容易想到把上面的代码给逆回来进行逐级递减即可。代码实现如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"> <br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>    spaces = <span class="hljs-string">&#x27; &#x27;</span> * (n - i)<br>    stars = <span class="hljs-string">&#x27;*&#x27;</span> * (<span class="hljs-number">2</span> * i - <span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(spaces + stars)<br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>):<br>    spaces = <span class="hljs-string">&#x27; &#x27;</span>*(n-j)<br>    stars = <span class="hljs-string">&#x27;*&#x27;</span>*(<span class="hljs-number">2</span>*j-<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(spaces+stars)<br></code></pre></td></tr></table></figure><h2 id="practice6"><a href="#practice6" class="headerlink" title="practice6"></a>practice6</h2><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">从键盘接收一个<span class="hljs-built_in">n</span>，用来确定数组包含的元素个数。并循环读入<span class="hljs-built_in">n</span>个数字字符，将其转换成<span class="hljs-built_in">int</span>型数据，存储在数组中。编写一个程序，让数组中，相邻的两位进行比较，并将比较大的数字交换到后面的位置，将数组中相邻的两位依次比较，确保经过一轮比较后，数组中最大的数字放在索引为<span class="hljs-built_in">n</span>-<span class="hljs-number">1</span>的位置上。输出此时最大值在索引最大位置上的数组。<br></code></pre></td></tr></table></figure><p>这个题目我们只需要根据题目的叙述来比较每个数与下个数进行比较，如果大于那么就直接进行交换位置。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>l =[]<br><span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    l.append(<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>()))<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n-<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">if</span> l[i] &gt; l[i+<span class="hljs-number">1</span>]:<br>        l[i],l[i+<span class="hljs-number">1</span>] = l[i+<span class="hljs-number">1</span>],l[i]<br><span class="hljs-built_in">print</span>(l)<br></code></pre></td></tr></table></figure><h2 id="practice-7"><a href="#practice-7" class="headerlink" title="practice 7"></a>practice 7</h2><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">从键盘接收一个<span class="hljs-built_in">n</span>，代表当前数组中包含的元素个数。依次从键盘读入<span class="hljs-built_in">n</span>个数据，并转换成<span class="hljs-built_in">int</span>型，保存在数组中。按照上题的方法整理数组中的元素，将数组中元素整理为从小到大有序的数组输出。（注：不允许使用内置的排序函数，或方法）<br></code></pre></td></tr></table></figure><p>这个题目有限制，那么我们应该考虑的是将每个数都作比较，然后如果前面的数大于后面的数那么就可以进行交换位置。这样子便可以达到从小到大排序的效果了。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>l =[]<br><span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    l.append(<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>()))<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(l)):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i,<span class="hljs-built_in">len</span>(l)):<br>        <span class="hljs-keyword">if</span> l[i] &gt; l[j]:<br>            l[i],l[j] = l[j],l[i]<br><span class="hljs-built_in">print</span>(l)<br></code></pre></td></tr></table></figure><h2 id="practice-8"><a href="#practice-8" class="headerlink" title="practice 8"></a>practice 8</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">从键盘接收一个m，代表二维数组的行数，再从键盘接收一个n，代表二维数组的列数。利用循环读入二维数组所有的数值，并转换为<span class="hljs-built_in">int</span>类型，存在数组中。输出该二维数组。<br></code></pre></td></tr></table></figure><p>这个题目比较简单就直接在代码里呈现思路了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">l = []<br>m = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    row = []<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        row.append(<span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>()))<br>    l.append(row)<br><span class="hljs-built_in">print</span>(l)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>practice</category>
      
    </categories>
    
    
    <tags>
      
      <tag>some test</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>&#39;python_practice&#39;</title>
    <link href="/2024/03/13/python-practice/"/>
    <url>/2024/03/13/python-practice/</url>
    
    <content type="html"><![CDATA[<h1 id="对于函数的理解"><a href="#对于函数的理解" class="headerlink" title="对于函数的理解"></a>对于函数的理解</h1><p>[TOC]</p><h2 id="函数的定义"><a href="#函数的定义" class="headerlink" title="函数的定义"></a>函数的定义</h2><p>通过写一串代码块，来定义出自己想到的解决问题的方法，不要将函数都写到主函数中！</p><h3 id="关于传参"><a href="#关于传参" class="headerlink" title="关于传参"></a>关于传参</h3><p>在函数中参数分为形参和实参，一般的形参没有任何意义{()里面的参数名}，实参是传进去的一个实际变量。</p><h2 id="函数递归"><a href="#函数递归" class="headerlink" title="函数递归"></a>函数递归</h2><p>函数的递归本质来说就是在自己定义的函数中继续调用自己，每调用一层就意味着要进入一层新的循环。而且递归函数都有其自己的结束条件，也就是在遇到阻碍自己的障碍物之前会一直进行递推。那么该阻碍递推的障碍物就是其结束条件。因此递归有两个要素：递归关系 和 结束条件。</p><p>特别的    递归的时候，每次调用一个函数，计算机都会为这个函数分配新的空间，这就是说，当被调函数返回的时候，调用函数中的变量依然会保持原先的值，否则也不可能实现反向输出。</p><h3 id="斐波那契数列"><a href="#斐波那契数列" class="headerlink" title="斐波那契数列"></a>斐波那契数列</h3><p>因为斐波那契数列是第三个数等于前两个数之和，那么我们就有两种思路，一种就是根据正常的函数写法，一个就是递归思想。这里第一种方法只给出脚本，重点在于递归函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fib</span>(<span class="hljs-params">n</span>):<br>    a, b = <span class="hljs-number">0</span>, <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        a, b = b, a + b<br>        <span class="hljs-keyword">yield</span> a<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">yield 关键字在python中是一种定义生成器的方式，将一个普通函数改造成生成函数。</span><br><span class="hljs-string">简单理解来说yield就是return返回一个值，并且记住返回值的位置，下次直接从这个位置开始。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> fib(<span class="hljs-number">20</span>):<br>    <span class="hljs-built_in">print</span>(val)<br><br></code></pre></td></tr></table></figure><p>递归函数:</p><p>根据斐波那契数列的定义f(n) &#x3D; f(n-1)+f(n-2)。</p><p>这里的函数就是在自己定义的函数中不断进行调用自己，直到遇到自己的结束条件停止。就是工作原理如下图所示。</p><p><img src="https://img2.imgtp.com/2024/03/18/S56ycdlM.png" alt="65f2ab6278d63d6da80a27eb4a033c59.png"></p><p>然后思路就非常明确了，就是我们可以在函数中进行调用自己，通过函数递归就能够实现这行代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fib</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">2</span> <span class="hljs-keyword">else</span> fib(n - <span class="hljs-number">1</span>) + fib(n - <span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">int</span>(fib(<span class="hljs-number">5</span>)))<br><span class="hljs-comment">#这串代码是通过函数递归得到第n位的斐波那契值</span><br></code></pre></td></tr></table></figure><h3 id="函数递归的特点"><a href="#函数递归的特点" class="headerlink" title="函数递归的特点"></a>函数递归的特点</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 每一级函数调用时都有自己的变量，但是函数代码并不会得到复制，如计算5的阶乘时每递推一次变量都不同；<br><span class="hljs-bullet">2.</span> 每次调用都会有一次返回，如计算5的阶乘时每递推一次都返回进行下一次；<br><span class="hljs-bullet">3.</span> 递归函数中，位于递归调用前的语句和各级被调用函数具有相同的执行顺序；<br><span class="hljs-bullet">4.</span> 递归函数中，位于递归调用后的语句的执行顺序和各个被调用函数的顺序相反；<br><span class="hljs-bullet">5.</span> 递归函数中必须有终止语句。<br><br></code></pre></td></tr></table></figure><p>总而言之：递归就是进行一次自我调用且拥有完成体。</p><p>对于函数递归来说因为是不断调用函数的内存，也就是说是一种栈的应用：</p><h4 id="效率"><a href="#效率" class="headerlink" title="效率"></a>效率</h4><p>1.系统栈（也叫核心栈、内核栈）<br>是内存中属于操作系统空间的一块区域，其主要用途为： (1)保存中断现场，对于嵌套中断，被中断程序的现场信息依次压入系统栈，中断返回时逆序弹出； (2)保存操作系统子程序间相互调用的参数、返回值、返回点以及子程序(函数)的局部变量。</p><p>2.用户栈<br>是用户进程空间中的一块区域，用于保存用户进程的子程序间相互调用的参数、返回值、返回点以及子程序(函数)的局部变量。<br>我们编写的递归程序属于用户程序，因此使用的是用户栈。</p><p>3.栈溢出<br>函数调用的参数是通过栈空间来传递的，在调用过程中会占用线程的栈资源。而递归调用，只有走到最后的结束点后函数才能依次退出，而未到达最后的结束点之前，占用的栈空间一直没有释放，如果递归调用次数过多，就可能导致占用的栈资源超过线程的最大值，从而导致栈溢出，导致程序的异常退出。</p><p>因此我们可以知道每次函数递归，对于函数本身来说需要保存的内容就包括（局部变量，形参，调用的函数地址，返回值)，因此被调用n次函数就会产生n次函数值，那么运行效率也就不如直接写循环了。</p><p><strong>循环能干的事,递归都能干;递归能干的循环不一定能干</strong>！！！</p>]]></content>
    
    
    <categories>
      
      <category>practice</category>
      
    </categories>
    
    
    <tags>
      
      <tag>函数递归</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>posts</title>
    <link href="/2024/03/07/posts/"/>
    <url>/2024/03/07/posts/</url>
    
    <content type="html"><![CDATA[<p>test for latex</p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -1.552ex;" xmlns="http://www.w3.org/2000/svg" width="13.088ex" height="4.968ex" role="img" focusable="false" viewBox="0 -1509.9 5785.1 2195.9" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path><path id="MJX-1-TEX-I-1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path><path id="MJX-1-TEX-N-2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path><path id="MJX-1-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-1-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"></use></g><g data-mml-node="mi" transform="translate(529,0)"><use data-c="1D44F" xlink:href="#MJX-1-TEX-I-1D44F"></use></g><g data-mml-node="mo" transform="translate(1235.8,0)"><use data-c="2264" xlink:href="#MJX-1-TEX-N-2264"></use></g><g data-mml-node="mfrac" transform="translate(2291.6,0)"><g data-mml-node="mrow" transform="translate(220,676)"><g data-mml-node="msup"><g data-mml-node="mi"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"></use></g><g data-mml-node="mn" transform="translate(562,363) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(1187.8,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="msup" transform="translate(2188,0)"><g data-mml-node="mi"><use data-c="1D44F" xlink:href="#MJX-1-TEX-I-1D44F"></use></g><g data-mml-node="mn" transform="translate(462,363) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use></g></g></g><g data-mml-node="mn" transform="translate(1496.8,-686)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use></g><rect width="3253.6" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container>]]></content>
    
    
    <categories>
      
      <category>test latex</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>HELLO</title>
    <link href="/2024/03/06/HELLO/"/>
    <url>/2024/03/06/HELLO/</url>
    
    <content type="html"><![CDATA[<p>welcome to my blog,it is worthwhile creating it.</p><p><img src="https://img2.imgtp.com/2024/03/06/th192Bhi.png"></p>]]></content>
    
    
    <categories>
      
      <category>hello</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2024/03/06/hello-world/"/>
    <url>/2024/03/06/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
